"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9007],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),m=r,g=d["".concat(l,".").concat(m)]||d[m]||u[m]||i;return n?a.createElement(g,o(o({ref:t},p),{},{components:n})):a.createElement(g,o({ref:t},p))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2768:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const i={sidebar_position:1},o="TigerBeetle in Your System Architecture",s={unversionedId:"coding/system-architecture",id:"coding/system-architecture",title:"TigerBeetle in Your System Architecture",description:"TigerBeetle is an Online Transaction Processing (OLTP) database built for safety and performance. It",source:"@site/pages/coding/system-architecture.md",sourceDirName:"coding",slug:"/coding/system-architecture",permalink:"/coding/system-architecture",draft:!1,editUrl:"https://github.com/tigerbeetle/tigerbeetle/blob/main/docs/coding/system-architecture.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Developing Applications on TigerBeetle",permalink:"/coding/"},next:{title:"Data Modeling",permalink:"/coding/data-modeling"}},l={},c=[{value:"Division of Responsibilities",id:"division-of-responsibilities",level:2},{value:"Ledger, Account, and Transfer Types",id:"ledger-account-and-transfer-types",level:2},{value:"Authentication",id:"authentication",level:2}],p={toc:c},d="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"tigerbeetle-in-your-system-architecture"},"TigerBeetle in Your System Architecture"),(0,r.kt)("p",null,"TigerBeetle is an Online Transaction Processing (OLTP) database built for safety and performance. It\nis not a general purpose database like PostgreSQL or MySQL. Instead, TigerBeetle works alongside\nyour general purpose database, which we refer to as an Online General Purpose (OLGP) database."),(0,r.kt)("p",null,"TigerBeetle should be used in the data plane, or hot path of transaction processing, while your\ngeneral purpose database is used in the control plane and may be used for storing information or\nmetadata that is updated less frequently."),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://github.com/tigerbeetle/tigerbeetle/assets/3262610/c145acd5-ec6e-49f4-9bd0-77cd242d2b8f",alt:"TigerBeetle in Your System Architecture"})),(0,r.kt)("h2",{id:"division-of-responsibilities"},"Division of Responsibilities"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"App or Website")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Initiate transactions"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/coding/reliable-transaction-submission#the-app-or-browser-should-generate-the-id"},"Generate Transfer and Account IDs"))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Stateless API Service")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Handle authentication and authorization"),(0,r.kt)("li",{parentName:"ul"},"Create account records in both the general purpose database and TigerBeetle when users sign up"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#ledger-account-and-transfer-types"},"Cache ledger metadata")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/requests/#batching-events"},"Batch transfers")),(0,r.kt)("li",{parentName:"ul"},"Apply exchange rates for ",(0,r.kt)("a",{parentName:"li",href:"/coding/recipes/currency-exchange"},"currency exchange")," transactions")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"General Purpose (OLGP) Database")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Store metadata about ledgers and accounts (such as string names or descriptions)"),(0,r.kt)("li",{parentName:"ul"},"Store mappings between ",(0,r.kt)("a",{parentName:"li",href:"#ledger-account-and-transfer-types"},"integer type identifiers")," used in\nTigerBeetle and string representations used by the app and API")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"TigerBeetle (OLTP) Database")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Record transfers between accounts"),(0,r.kt)("li",{parentName:"ul"},"Track balances for accounts"),(0,r.kt)("li",{parentName:"ul"},"Enforce balance limits"),(0,r.kt)("li",{parentName:"ul"},"Enforce financial consistency through double-entry bookkeeping"),(0,r.kt)("li",{parentName:"ul"},"Enforce strict serializability of events"),(0,r.kt)("li",{parentName:"ul"},"Optionally store pointers to records or entities in the general purpose database in the\n",(0,r.kt)("a",{parentName:"li",href:"/coding/data-modeling#user_data"},(0,r.kt)("inlineCode",{parentName:"a"},"user_data"))," fields")),(0,r.kt)("h2",{id:"ledger-account-and-transfer-types"},"Ledger, Account, and Transfer Types"),(0,r.kt)("p",null,"For performance reasons, TigerBeetle stores the ledger, account, and transfer types as simple\nintegers. Most likely, you will want these integers to map to enums of type names or strings, along\nwith other associated metadata."),(0,r.kt)("p",null,"The mapping from the string representation of these types to the integers used within TigerBeetle\nmay be hard-coded into your application logic or stored in a general purpose (OLGP) database and\ncached by your application. (These mappings should be immutable and append-only, so there is no\nconcern about cache invalidation.)"),(0,r.kt)("p",null,"\u26a0\ufe0f Importantly, ",(0,r.kt)("strong",{parentName:"p"},"initiating a transfer should not require fetching metadata from the general\npurpose database"),". If it does, that database will become the bottleneck and will negate the\nperformance gains from using TigerBeetle."),(0,r.kt)("p",null,"Specifically, the types of information that fit into this category include:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Hard-coded in app or cached"),(0,r.kt)("th",{parentName:"tr",align:null},"In TigerBeetle"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},'Currency or asset code\'s string representation (for example, "USD")'),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/coding/data-modeling#asset-scale"},(0,r.kt)("inlineCode",{parentName:"a"},"ledger"))," and ",(0,r.kt)("a",{parentName:"td",href:"/coding/data-modeling#asset-scale"},"asset scale"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},'Account type\'s string representation (for example, "cash")'),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/coding/data-modeling#code"},(0,r.kt)("inlineCode",{parentName:"a"},"code")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},'Transfer type\'s string representation (for example, "refund")'),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/coding/data-modeling#code"},(0,r.kt)("inlineCode",{parentName:"a"},"code")))))),(0,r.kt)("h2",{id:"authentication"},"Authentication"),(0,r.kt)("p",null,"TigerBeetle does not support authentication. You should never allow untrusted users or services to\ninteract with it directly."),(0,r.kt)("p",null,"Also, untrusted processes must not be able to access or modify TigerBeetle's on-disk data file."))}u.isMDXComponent=!0}}]);