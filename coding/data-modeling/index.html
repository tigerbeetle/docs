<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' plausible.io 'sha256-FBIbgrc+JMV/r1eq9+0f7S96+x2pHS1pRBNqAR0BQbw='">
    <meta name="description" content="The financial transactions database to power the next 30 years of Online Transaction Processing.">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@TigerBeetleDB">
    <meta name="twitter:author" content="@TigerBeetleDB">
    <meta name="twitter:description" content="The financial transactions database to power the next 30 years of Online Transaction Processing.">
    <meta name="twitter:title" content="Data Modeling | TigerBeetle Docs">
    <meta name="twitter:image" content="https://docs.tigerbeetle.com/img/preview.webp">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Data Modeling | TigerBeetle Docs">
    <meta property="og:image" content="https://docs.tigerbeetle.com/img/preview.webp">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="TigerBeetle Team">
    <title id="title">Data Modeling | TigerBeetle Docs</title>
    <link rel="icon" href="/img/favicon.png">
    <link rel="stylesheet" type="text/css" href="/style/style.css">
    <link rel="stylesheet" type="text/css" href="/style/highlight.css">
    <script defer data-domain="docs.tigerbeetle.com" src="https://plausible.io/js/script.js"></script>
  </head>
  <body>
    <a class="expand-button" title="Show menu">
      <div>
        <svg width="28" height="24" viewBox="0 0 28 24" aria-label="TigerBeetle logo">
          <use href="#svg-tigerbeetle-logo"></use>
        </svg>
        <svg class="tick" width="16" height="16" fill="none">
          <path d="M7 5L10 8L7 11" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"/>
        </svg>
      </div>
    </a>
    <nav class="left-pane">
      <div class="top-wrapper">
        <div class="top">
          <header>
            <div class="logo">
              <a href="https://tigerbeetle.com" aria-label="TigerBeetle website">
                <svg width="127" height="24" viewBox="0 0 127 24" aria-label="TigerBeetle logo">
                  <use href="#svg-tigerbeetle-logo"></use>
                </svg>
              </a>
            </div>
            <div class="line"></div>
            <a href="/">Docs</a>
            <div class="spacer"></div>
            <a class="menu-button">
              <svg class="icon-burger" width="24" height="24">
                <path d="M2.5 5.5 21.5 5.5M2.5 12 21.5 12M2.5 18.5 21.5 18.5" stroke-width="1.5" stroke-linecap="round" stroke="currentColor" />
              </svg>
              <svg class="icon-x" width="24" height="24" fill="none">
                <path d="M6 6 18 18M6 18 18 6" stroke-width="1.5" stroke-linecap="round" stroke="currentColor" />
              </svg>
            </a>
            <a class="collapse-button" title="Hide menu">
              <svg width="16" height="16" fill="none">
                <path d="M7 5L4 8L7 11M12 5L9 8L12 11" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"/>
              </svg>
            </a>
          </header>
          <div class="search-box" style="display: none;">
            <input type="search" placeholder="Search" />
            <svg class="search-icon" width="16" height="16" fill="none">
              <circle cx="6.5" cy="6.5" r="4.5" stroke-width="1.5" stroke="currentColor"/>
              <path d="M10 10l4 4" stroke-width="1.5" stroke-linecap="round" stroke="currentColor"/>
            </svg>
            <svg class="hotkey" width="16" height="16" fill="none">
              <rect x="0.5" y="0.5" width="15" height="15" rx="2.5" stroke="var(--gray-7)"/>
              <path d="M9.55584 3.38636L7.21209 12.0938H6.44505L8.7888 3.38636H9.55584Z" fill="var(--gray-11)"/>
            </svg>    
            <svg class="clear-button" width="16" height="16">
              <path d="m16 8a8 8 0 0 0-16 0 8 8 0 0 0 16 0m-9 0-2.5-2.5 1-1 2.5 2.5 2.5-2.5 1 1-2.5 2.5 2.5 2.5-1 1-2.5-2.5-2.5 2.5-1-1" fill="currentColor" />
            </svg>
          </div>
          <p class="search-stats"></p>
        </div>
      </div>
      <div class="search-results"></div>
      <div class="search-notfound">
        <picture>
          <source width="158" height="119" srcset="/img/notfound-light.webp" media="(prefers-color-scheme: light)"/>
          <source width="160" height="119" srcset="/img/notfound-dark.webp" media="(prefers-color-scheme: dark)"/>
          <img width="158" height="119" src="/img/notfound-light.webp"/>
        </picture>
        <p>
          Still haven't found what you're looking for?<br>
          <a href="https://join.slack.com/t/tigerbeetle/shared_invite/zt-2zja1sjtx-hUwPqHCo7_nqy6jItyYZKg">Ask the TigerBeetle Slack Community.</a>
        </p>
      </div>
      <nav class="side">
        <ol><li class="item"><a href="/quick-start/">Quick Start</a></li><li><details open><summary class="item"><a href="/coding/">Coding</a></summary><ol><li class="item"><a href="/coding/system-architecture/">TigerBeetle in Your System Architecture</a></li><li class="item"><a href="/coding/data-modeling/" class="target">Data Modeling</a></li><li class="item"><a href="/coding/financial-accounting/">Financial Accounting</a></li><li class="item"><a href="/coding/two-phase-transfers/">Two-Phase Transfers</a></li><li class="item"><a href="/coding/reliable-transaction-submission/">Reliable Transaction Submission</a></li><li class="item"><a href="/coding/time/">Time</a></li><li><details><summary class="item">Recipes</summary><ol><li class="item"><a href="/coding/recipes/currency-exchange/">Currency Exchange</a></li><li class="item"><a href="/coding/recipes/multi-debit-credit-transfers/">Multi-Debit, Multi-Credit Transfers</a></li><li class="item"><a href="/coding/recipes/close-account/">Close Account</a></li><li class="item"><a href="/coding/recipes/balance-conditional-transfers/">Balance-Conditional Transfers</a></li><li class="item"><a href="/coding/recipes/balance-bounds/">Balance Bounds</a></li><li class="item"><a href="/coding/recipes/correcting-transfers/">Correcting Transfers</a></li><li class="item"><a href="/coding/recipes/rate-limiting/">Rate Limiting</a></li><li class="item"><a href="/coding/recipes/balance-invariant-transfers/">Balance-invariant Transfers</a></li></ol></details></li></ol></details></li><li><details><summary class="item">Operating</summary><ol><li class="item"><a href="/operating/deploy/">Deploying for Production</a></li><li class="item"><a href="/operating/hardware/">Hardware</a></li><li class="item"><a href="/operating/linux/">Deploying on Linux</a></li><li class="item"><a href="/operating/docker/">Docker</a></li><li class="item"><a href="/operating/managed-service/">Managed Service</a></li><li class="item"><a href="/operating/upgrading/">Upgrading</a></li></ol></details></li><li><details><summary class="item">Client Libraries</summary><ol><li class="item"><a href="/clients/go/">Go</a></li><li class="item"><a href="/clients/java/">Java</a></li><li class="item"><a href="/clients/dotnet/">.NET</a></li><li class="item"><a href="/clients/node/">Node.js</a></li><li class="item"><a href="/clients/python/">Python</a></li></ol></details></li><li><details><summary class="item">Reference</summary><ol><li class="item"><a href="/reference/account/">Account</a></li><li class="item"><a href="/reference/transfer/">Transfer</a></li><li class="item"><a href="/reference/account-balance/">AccountBalance</a></li><li class="item"><a href="/reference/account-filter/">AccountFilter</a></li><li class="item"><a href="/reference/query-filter/">QueryFilter</a></li><li><details><summary class="item"><a href="/reference/requests/">Requests</a></summary><ol><li class="item"><a href="/reference/requests/create_accounts/">create_accounts</a></li><li class="item"><a href="/reference/requests/create_transfers/">create_transfers</a></li><li class="item"><a href="/reference/requests/get_account_balances/">get_account_balances</a></li><li class="item"><a href="/reference/requests/get_account_transfers/">get_account_transfers</a></li><li class="item"><a href="/reference/requests/lookup_accounts/">lookup_accounts</a></li><li class="item"><a href="/reference/requests/lookup_transfers/">lookup_transfers</a></li><li class="item"><a href="/reference/requests/query_accounts/">query_accounts</a></li><li class="item"><a href="/reference/requests/query_transfers/">query_transfers</a></li></ol></details></li><li class="item"><a href="/reference/sessions/">Client Sessions</a></li></ol></details></li><li><details><summary class="item"><a href="/about/">About</a></summary><ol><li class="item"><a href="/about/oltp/">Built for OLTP</a></li><li class="item"><a href="/about/performance/">Performance</a></li><li class="item"><a href="/about/safety/">Safety</a></li><li class="item"><a href="/about/vopr/">Deterministic Simulation Testing</a></li><li class="item"><a href="/about/architecture/">Architecture</a></li><li class="item"><a href="/about/production-ready/">Production Ready</a></li><li class="item"><a href="/about/zig/">Zig</a></li></ol></details></li></ol>
      </nav>
    </nav>
    <div class="resizer"></div>
    <main>
      <article>
        <a id="github-link" href="https://github.com/tigerbeetle/tigerbeetle">
          GitHub
          <svg width="16" height="16">
            <path d="M5.75 4.75H11.25M11.25 4.75V10.25M11.25 4.75L4.75 11.25" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"/>
          </svg>
        </a>
        <div class="content">
          <h1 id="data-modeling"><a href="#data-modeling" class="anchor">Data
Modeling</a></h1>
<p>This section describes various aspects of the TigerBeetle data model
and provides some suggestions for how you can map your application’s
requirements onto the data model.</p>
<h2 id="accounts-transfers-and-ledgers"><a
href="#accounts-transfers-and-ledgers" class="anchor">Accounts,
Transfers, and Ledgers</a></h2>
<p>The TigerBeetle data model consists of <a
href="../../reference/account"><code>Account</code>s</a>, <a
href="../../reference/transfer"><code>Transfer</code>s</a>, and
ledgers.</p>
<h3 id="ledgers"><a href="#ledgers" class="anchor">Ledgers</a></h3>
<p>Ledgers partition accounts into groups that may represent a currency
or asset type or any other logical grouping. Only accounts on the same
ledger can transact directly, but you can use atomically linked
transfers to implement <a href="../recipes/currency-exchange">currency
exchange</a>.</p>
<p>Ledgers are only stored in TigerBeetle as a numeric identifier on the
<a href="../../reference/account#ledger">account</a> and <a
href="../../reference/transfer">transfer</a> data structures. You may
want to store additional metadata about each ledger in a control plane
<a href="../system-architecture">database</a>.</p>
<p>You can also use different ledgers to further partition accounts,
beyond asset type. For example, if you have a multi-tenant setup where
you are tracking balances for your customers’ end-users, you might have
a ledger for each of your customers. If customers have end-user accounts
in multiple currencies, each of your customers would have multiple
ledgers.</p>
<h2 id="debits-vs-credits"><a href="#debits-vs-credits"
class="anchor">Debits vs Credits</a></h2>
<p>TigerBeetle tracks each account’s cumulative posted debits and
cumulative posted credits. In double-entry accounting, an account
balance is the difference between the two — computed as either
<code>debits - credits</code> or <code>credits - debits</code>,
depending on the type of account. It is up to the application to compute
the balance from the cumulative debits/credits.</p>
<p>From the database’s perspective the distinction is arbitrary, but
accounting conventions recommend using a certain balance type for
certain types of accounts.</p>
<p>If you are new to thinking in terms of debits and credits, read the
<a href="../financial-accounting">deep dive on financial accounting</a>
to get a better understanding of double-entry bookkeeping and the
different types of accounts.</p>
<h3 id="debit-balances"><a href="#debit-balances" class="anchor">Debit
Balances</a></h3>
<p><code>balance = debits - credits</code></p>
<p>By convention, debit balances are used to represent:</p>
<ul>
<li>Operator’s Assets</li>
<li>Operator’s Expenses</li>
</ul>
<p>To enforce a positive (non-negative) debit balance, use <a
href="../../reference/account#flagscredits_must_not_exceed_debits"><code>flags.credits_must_not_exceed_debits</code></a>.</p>
<p>To keep an account’s balance between an upper and lower bound, see
the <a href="../recipes/balance-bounds">Balance Bounds recipe</a>.</p>
<h3 id="credit-balances"><a href="#credit-balances"
class="anchor">Credit Balances</a></h3>
<p><code>balance = credits - debits</code></p>
<p>By convention, credit balances are used to represent:</p>
<ul>
<li>Operators’s Liabilities</li>
<li>Equity in the Operator’s Business</li>
<li>Operator’s Income</li>
</ul>
<p>To enforce a positive (non-negative) credit balance, use <a
href="../../reference/account#flagsdebits_must_not_exceed_credits"><code>flags.debits_must_not_exceed_credits</code></a>.
For example, a customer account that is represented as an Operator’s
Liability would use this flag to ensure that the balance cannot go
negative.</p>
<p>To keep an account’s balance between an upper and lower bound, see
the <a href="../recipes/balance-bounds">Balance Bounds recipe</a>.</p>
<h3 id="compound-transfers"><a href="#compound-transfers"
class="anchor">Compound Transfers</a></h3>
<p><code>Transfer</code>s in TigerBeetle debit a single account and
credit a single account. You can read more about implementing compound
transfers in <a
href="../recipes/multi-debit-credit-transfers">Multi-Debit, Multi-Credit
Transfers</a>.</p>
<h2 id="fractional-amounts-and-asset-scale"><a
href="#fractional-amounts-and-asset-scale" class="anchor">Fractional
Amounts and Asset Scale</a></h2>
<p>To maximize precision and efficiency, <a
href="../../reference/account"><code>Account</code></a> debits/credits
and <a href="../../reference/transfer"><code>Transfer</code></a> amounts
are unsigned 128-bit integers. However, currencies are often denominated
in fractional amounts.</p>
<p>To represent a fractional amount in TigerBeetle, <strong>map the
smallest useful unit of the fractional currency to 1</strong>. Consider
all amounts in TigerBeetle as a multiple of that unit.</p>
<p>Applications may rescale the integer amounts as necessary when
rendering or interfacing with other systems. But when working with
fractional amounts, calculations should be performed on the integers to
avoid loss of precision due to floating-point approximations.</p>
<h3 id="asset-scale"><a href="#asset-scale" class="anchor">Asset
Scale</a></h3>
<p>When the multiplier is a power of 10 (e.g. <code>10 ^ n</code>), then
the exponent <code>n</code> is referred to as an <em>asset scale</em>.
For example, representing USD in cents uses an asset scale of
<code>2</code>.</p>
<h4 id="examples"><a href="#examples" class="anchor">Examples</a></h4>
<ul>
<li>In USD, <code>$1</code> = <code>100</code> cents. So for example,
<ul>
<li>The fractional amount <code>$0.45</code> is represented as the
integer <code>45</code>.</li>
<li>The fractional amount <code>$123.00</code> is represented as the
integer <code>12300</code>.</li>
<li>The fractional amount <code>$123.45</code> is represented as the
integer <code>12345</code>.</li>
</ul></li>
</ul>
<h3 id="oversized-amounts"><a href="#oversized-amounts"
class="anchor">Oversized Amounts</a></h3>
<p>The other direction works as well. If the smallest useful unit of a
currency is <code>10,000,000</code> units, then it can be scaled down to
the integer <code>1</code>.</p>
<p>The 128-bit representation defines the precision, but not the
scale.</p>
<h3 id="warning-asset-scales-cannot-be-easily-changed"><a
href="#warning-asset-scales-cannot-be-easily-changed" class="anchor">⚠️
Asset Scales Cannot Be Easily Changed</a></h3>
<p>When setting your asset scales, we recommend thinking about whether
your application may <em>ever</em> require a larger asset scale. If so,
we would recommend using that larger scale from the start.</p>
<p>For example, it might seem natural to use an asset scale of 2 for
many currencies. However, it may be wise to use a higher scale in case
you ever need to represent smaller fractions of that asset.</p>
<p>Accounts and transfers are immutable once created. In order to change
the asset scale of a ledger, you would need to use a different
<code>ledger</code> number and duplicate all the accounts on that ledger
over to the new one.</p>
<h2 id="user_data"><a href="#user_data"
class="anchor"><code>user_data</code></a></h2>
<p><code>user_data_128</code>, <code>user_data_64</code> and
<code>user_data_32</code> are the most flexible fields in the schema
(for both <a href="../../reference/account">accounts</a> and <a
href="../../reference/transfer">transfers</a>). Each
<code>user_data</code> field’s contents are arbitrary, interpreted only
by the application.</p>
<p>Each <code>user_data</code> field is indexed for efficient point and
range queries.</p>
<p>While the usage of each field is entirely up to you, one way of
thinking about each of the fields is:</p>
<ul>
<li><code>user_data_128</code> - this might store the “who” and/or
“what” of a transfer. For example, it could be a pointer to a business
entity stored within the <a
href="https://en.wikipedia.org/wiki/Control_plane">control plane</a>
database.</li>
<li><code>user_data_64</code> - this might store a second timestamp for
“when” the transaction originated in the real world, rather than when
the transfer was <a
href="../time#why-tigerbeetle-manages-timestamps">timestamped by
TigerBeetle</a>. This can be used if you need to model <a
href="https://en.wikipedia.org/wiki/Bitemporal_modeling">bitemporality</a>.
Alternatively, if you do not need this to be used for a timestamp, you
could use this field in place of the <code>user_data_128</code> to store
the “who”/“what”.</li>
<li><code>user_data_32</code> - this might store the “where” of a
transfer. For example, it could store the jurisdiction where the
transaction originated in the real world. In certain cases, such as for
cross-border remittances, it might not be enough to have the UTC
timestamp and you may want to know the transfer’s locale.</li>
</ul>
<p>(Note that the <a href="#code"><code>code</code></a> can be used to
encode the “why” of a transfer.)</p>
<p>Any of the <code>user_data</code> fields can be used as a group
identifier for objects that will be queried together. For example, for
multiple transfers used for <a
href="../recipes/currency-exchange">currency exchange</a>.</p>
<h2 id="id"><a href="#id" class="anchor"><code>id</code></a></h2>
<p>The <code>id</code> field uniquely identifies each <a
href="../../reference/account#id"><code>Account</code></a> and <a
href="../../reference/transfer#id"><code>Transfer</code></a> within the
cluster.</p>
<p>The primary purpose of an <code>id</code> is to serve as an
“idempotency key” — to avoid executing an event twice. For example, if a
client creates a transfer but the server’s reply is lost, the client (or
application) will retry — the database must not transfer the money
twice.</p>
<p>Note that <code>id</code>s are unique per cluster – not per ledger.
You should attach a separate identifier in the <a
href="#user_data"><code>user_data</code></a> field if you want to store
a connection between multiple <code>Account</code>s or multiple
<code>Transfer</code>s that are related to one another. For example,
different currency <code>Account</code>s belonging to the same user or
multiple <code>Transfer</code>s that are part of a <a
href="../recipes/currency-exchange">currency exchange</a>.</p>
<p><a href="#tigerbeetle-time-based-identifiers-recommended">TigerBeetle
Time-Based Identifiers</a> are recommended for most applications.</p>
<p>When selecting an <code>id</code> scheme:</p>
<ul>
<li>Idempotency is particularly important (and difficult) in the context
of <a href="../reliable-transaction-submission">application crash
recovery</a>.</li>
<li>Be careful to <a
href="https://en.wikipedia.org/wiki/Birthday_problem">avoid
<code>id</code> collisions</a>.</li>
<li>An account and a transfer may share the same <code>id</code> (they
belong to different “namespaces”), but this is not recommended because
other systems (that you may later connect to TigerBeetle) may use a
single “namespace” for all objects.</li>
<li>Avoid requiring a central oracle to generate each unique
<code>id</code> (e.g. an auto-increment field in SQL). A central oracle
may become a performance bottleneck when creating
accounts/transfers.</li>
<li>Sequences of identifiers with long runs of strictly increasing (or
strictly decreasing) values are amenable to optimization, leading to
higher database throughput.</li>
<li>Random identifiers are not recommended – they can’t take advantage
of all of the LSM optimizations. (Random identifiers have ~10% lower
throughput than strictly-increasing ULIDs).</li>
</ul>
<h3 id="tigerbeetle-time-based-identifiers-recommended"><a
href="#tigerbeetle-time-based-identifiers-recommended"
class="anchor">TigerBeetle Time-Based Identifiers (Recommended)</a></h3>
<p>TigerBeetle recommends using a specific ID scheme for most
applications. It is time-based and lexicographically sortable. The
scheme is inspired by ULIDs and UUIDv7s but is better able to take
advantage of LSM optimizations, which leads to higher database
throughput.</p>
<p>TigerBeetle clients include an <code>id()</code> function to generate
IDs using the recommended scheme.</p>
<p>TigerBeetle IDs consist of:</p>
<ul>
<li>48 bits of (millisecond) timestamp (high-order bits)</li>
<li>80 bits of randomness (low-order bits)</li>
</ul>
<p>When creating multiple objects during the same millisecond, we
increment the random bytes rather than generating new random bytes.
Furthermore, it is important that IDs are stored in little-endian with
the random bytes as the lower-order bits and the timestamp as the
higher-order bits. These details ensure that a sequence of objects have
strictly increasing IDs according to the server, which improves database
optimization.</p>
<p>Similar to ULIDs and UUIDv7s, these IDs have the following
benefits:</p>
<ul>
<li>they have an insignificant risk of collision.</li>
<li>they do not require a central oracle to generate.</li>
</ul>
<h3 id="reuse-foreign-identifier"><a href="#reuse-foreign-identifier"
class="anchor">Reuse Foreign Identifier</a></h3>
<p>This technique is most appropriate when integrating TigerBeetle with
an existing application where TigerBeetle accounts or transfers map
one-to-one with an entity in the foreign database.</p>
<p>Set <code>id</code> to a “foreign key” — that is, reuse an identifier
of a corresponding object from another database. For example, if every
user (within the application’s database) has a single account, then the
identifier within the foreign database can be used as the
<code>Account.id</code> within TigerBeetle.</p>
<p>To reuse the foreign identifier, it must conform to TigerBeetle’s
<code>id</code> <a
href="../../reference/account#id">constraints</a>.</p>
<h2 id="code"><a href="#code" class="anchor"><code>code</code></a></h2>
<p>The <code>code</code> identifier represents the “why” for an Account
or Transfer.</p>
<p>On an <a
href="../../reference/account#code"><code>Account</code></a>, the
<code>code</code> indicates the account type, such as assets,
liabilities, equity, income, or expenses, and subcategories within those
classification.</p>
<p>On a <a
href="../../reference/transfer#code"><code>Transfer</code></a>, the
<code>code</code> indicates why a given transfer is happening, such as a
purchase, refund, currency exchange, etc.</p>
<p>When you start building out your application on top of TigerBeetle,
you may find it helpful to list out all of the known types of accounts
and movements of funds and mapping each of these to <code>code</code>
numbers or ranges.</p>
<a id="edit-link" href="https://github.com/tigerbeetle/tigerbeetle/edit/main/docs/coding/data-modeling.md">
  <svg width="16" height="16" fill="none">
    <path d="M10 4L12 6M8.667 13.333H14M3.333 10.667L2.667 13.333L5.333 12.667L13.0574 4.94263C13.3074 4.69259 13.4478 4.35351 13.4478 4C13.4478 3.64641 13.3074 3.30733 13.0574 3.05729L12.9427 2.94263C12.6927 2.69267 12.3536 2.55225 12 2.55225C11.6465 2.55225 11.3075 2.69267 11.0574 2.94263L3.333 10.667Z" stroke-width="1.333" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"/>
  </svg>
  Edit this page
</a>

        </div>
      </article>
    </main>
    <div id="svg-templates" style="width: 0; height: 0; overflow: hidden;" aria-hidden="true">
      <svg id="svg-tigerbeetle-logo" width="127" height="24" viewBox="0 0 127 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="m20.637 6.4656h-20.637c0-3.5378 3.1347-6.4656 6.7918-6.4656h20.637c0 3.5378-3.1347 6.4656-6.7919 6.4656z" fill="currentColor"/>
        <path d="m8.0098 22.84 1.4016-9.5939c0.59548-4.076 4.0996-7.1037 8.2215-7.1037l-1.8889 12.465c-0.6421 2.9286-4.0162 4.867-7.7342 4.2322z" fill="currentColor"/>
        <path d="m32.351 7.7116 0.3579-2.1298h10.035l-0.358 2.1298h-3.7406l-1.6705 10.088h-2.5534l1.6705-10.088h-3.7406zm9.969 10.088 1.5273-9.1636h2.5414l-1.5272 9.1636h-2.5415zm3.0605-10.357c-0.3778 0-0.69-0.12528-0.9366-0.37585-0.2427-0.25455-0.3421-0.55682-0.2983-0.90682 0.0437-0.35796 0.2147-0.66023 0.513-0.90682 0.2983-0.25057 0.6364-0.37585 1.0142-0.37585 0.3779 0 0.6861 0.12528 0.9248 0.37585 0.2386 0.24659 0.338 0.54886 0.2983 0.90682-0.0398 0.35-0.2089 0.65227-0.5072 0.90682-0.2943 0.25057-0.6303 0.37585-1.0082 0.37585zm5.0725 13.984c-0.8272 0-1.5173-0.1134-2.0701-0.3401-0.5489-0.2227-0.9665-0.527-1.2529-0.9128-0.2824-0.3858-0.4375-0.8193-0.4653-1.3005l2.4102-0.3162c0.0437 0.1869 0.1273 0.3599 0.2506 0.519 0.1272 0.1591 0.3082 0.2864 0.5429 0.3818 0.2386 0.0955 0.5468 0.1432 0.9247 0.1432 0.5528 0 1.0341-0.1352 1.4437-0.4057 0.4097-0.2665 0.6622-0.7139 0.7577-1.3423l0.2744-1.6764h-0.1074c-0.1511 0.2545-0.3579 0.4951-0.6204 0.7218-0.2585 0.2267-0.5747 0.4117-0.9486 0.5549-0.3699 0.1431-0.7974 0.2147-1.2827 0.2147-0.692 0-1.2926-0.1591-1.8017-0.4772-0.5051-0.3222-0.871-0.8134-1.0977-1.4736-0.2227-0.6642-0.2506-1.5034-0.0835-2.5176 0.175-1.0381 0.4892-1.9051 0.9426-2.6012 0.4534-0.69599 0.9903-1.217 1.6108-1.563s1.2668-0.51904 1.9389-0.51904c0.5131 0 0.9267 0.0875 1.2409 0.2625 0.3182 0.17103 0.5628 0.3858 0.7338 0.64432 0.1711 0.25455 0.2924 0.50512 0.364 0.75175h0.1014l0.2505-1.5392h2.5236l-1.5392 9.2532c-0.1233 0.7835-0.4196 1.4358-0.8889 1.9568-0.4653 0.525-1.056 0.9187-1.7719 1.1812-0.7159 0.2665-1.5094 0.3998-2.3804 0.3998zm0.9546-5.6677c0.4057 0 0.7696-0.1014 1.0917-0.3042 0.3262-0.2068 0.5986-0.5012 0.8174-0.883 0.2187-0.3858 0.3718-0.8471 0.4593-1.3841 0.0875-0.5369 0.0855-1.0022-0.0059-1.396-0.0875-0.3977-0.2586-0.7059-0.5131-0.9247-0.2506-0.2187-0.5807-0.3281-0.9903-0.3281-0.4216 0-0.7915 0.1133-1.1097 0.34-0.3182 0.2228-0.5827 0.533-0.7935 0.9307-0.2068 0.3977-0.352 0.8571-0.4355 1.3781-0.0875 0.529-0.0915 0.9864-0.0119 1.3722 0.0835 0.3818 0.2486 0.6781 0.4952 0.8889 0.2466 0.2068 0.5787 0.3102 0.9963 0.3102zm10.273 2.2194c-0.9387 0-1.7162-0.1909-2.3327-0.5728-0.6165-0.3858-1.05-0.9306-1.3006-1.6346-0.2466-0.708-0.2883-1.5452-0.1253-2.5117 0.1591-0.9426 0.4793-1.7699 0.9606-2.4818 0.4852-0.7119 1.0937-1.2668 1.8255-1.6645 0.7318-0.39772 1.5472-0.59659 2.446-0.59659 0.6046 0 1.1515 0.09745 1.6407 0.29233 0.4932 0.19091 0.9028 0.48125 1.2289 0.87103 0.3262 0.38581 0.5489 0.86901 0.6682 1.4497 0.1233 0.5807 0.1213 1.2608-0.0059 2.0403l-0.1134 0.6981h-7.7318l0.2446-1.575h5.3454c0.0597-0.366 0.0358-0.6901-0.0715-0.9725-0.1074-0.2824-0.2864-0.5031-0.537-0.6622-0.2505-0.1631-0.5588-0.2446-0.9247-0.2446-0.3739 0-0.7239 0.0915-1.05 0.2744-0.3261 0.183-0.6006 0.4236-0.8233 0.7219-0.2187 0.2943-0.3599 0.6145-0.4236 0.9605l-0.2804 1.5631c-0.0795 0.4812-0.0636 0.8809 0.0478 1.1991 0.1153 0.3182 0.3142 0.5568 0.5966 0.7159 0.2823 0.1551 0.6403 0.2327 1.0738 0.2327 0.2824 0 0.5469-0.0398 0.7935-0.1193 0.2506-0.0796 0.4733-0.1969 0.6682-0.352 0.1949-0.1591 0.3539-0.356 0.4772-0.5906l2.3208 0.1551c-0.2148 0.5648-0.5409 1.0579-0.9784 1.4795-0.4375 0.4176-0.9645 0.7438-1.581 0.9784-0.6125 0.2307-1.2986 0.3461-2.0582 0.3461zm5.9047-0.179 1.5273-9.1636h2.4639l-0.2684 1.5988h0.0954c0.2625-0.56873 0.6145-0.99828 1.056-1.2886 0.4454-0.29432 0.9247-0.44148 1.4378-0.44148 0.1272 0 0.2605 0.00796 0.3997 0.02386 0.1432 0.01194 0.2704 0.03182 0.3818 0.05966l-0.3818 2.2611c-0.1114-0.0398-0.2705-0.0716-0.4773-0.0955-0.2028-0.0278-0.3957-0.0417-0.5787-0.0417-0.3699 0-0.7139 0.0815-1.0321 0.2446-0.3182 0.1591-0.5866 0.3818-0.8054 0.6682-0.2148 0.2863-0.356 0.6164-0.4236 0.9903l-0.8531 5.1844h-2.5415zm6.922 0 2.0284-12.218h4.892c0.8989 0 1.6267 0.13323 2.1835 0.39971 0.5608 0.26648 0.9526 0.63637 1.1753 1.1097 0.2228 0.46932 0.2824 1.0102 0.179 1.6227-0.0835 0.47727-0.2525 0.89488-0.5071 1.2528-0.2506 0.35795-0.5608 0.65225-0.9307 0.88295s-0.7716 0.3938-1.2051 0.4892l-0.0239 0.1193c0.4614 0.0199 0.877 0.1512 1.2469 0.3938 0.3699 0.2386 0.6463 0.5767 0.8293 1.0142 0.1829 0.4375 0.2247 0.9565 0.1253 1.5571-0.1074 0.6483-0.364 1.227-0.7696 1.7361-0.4057 0.5051-0.9466 0.9048-1.6228 1.1991-0.6721 0.2943-1.4656 0.4415-2.3804 0.4415h-5.2201zm2.9412-2.1119h2.1059c0.7159 0 1.2628-0.1392 1.6407-0.4177 0.3778-0.2784 0.6045-0.6463 0.6801-1.1037 0.0517-0.338 0.0179-0.6363-0.1015-0.8948-0.1153-0.2586-0.3122-0.4614-0.5906-0.6086-0.2744-0.1471-0.6224-0.2207-1.044-0.2207h-2.1597l-0.5309 3.2455zm0.8292-4.9935h1.9151c0.35 0 0.6741-0.0617 0.9724-0.185 0.3023-0.1272 0.5509-0.3062 0.7458-0.53688 0.1988-0.23466 0.3241-0.51108 0.3758-0.82927 0.0716-0.44545-0.0278-0.80142-0.2983-1.0679-0.2665-0.27046-0.6841-0.40569-1.2528-0.40569h-1.9568l-0.5012 3.0247zm11.441 7.2844c-0.9386 0-1.7161-0.1909-2.3326-0.5728-0.6165-0.3858-1.05-0.9306-1.3006-1.6346-0.2466-0.708-0.2883-1.5452-0.1253-2.5117 0.1591-0.9426 0.4793-1.7699 0.9605-2.4818 0.4853-0.7119 1.0938-1.2668 1.8256-1.6645 0.7318-0.39772 1.5472-0.59659 2.446-0.59659 0.6046 0 1.1514 0.09745 1.6406 0.29233 0.4932 0.19091 0.9029 0.48125 1.229 0.87103 0.3262 0.38581 0.5489 0.86901 0.6682 1.4497 0.1233 0.5807 0.1213 1.2608-6e-3 2.0403l-0.1133 0.6981h-7.7318l0.2446-1.575h5.3454c0.0597-0.366 0.0358-0.6901-0.0716-0.9725-0.1073-0.2824-0.2863-0.5031-0.5369-0.6622-0.2506-0.1631-0.5588-0.2446-0.9247-0.2446-0.3739 0-0.7239 0.0915-1.05 0.2744-0.3261 0.183-0.6006 0.4236-0.8233 0.7219-0.2188 0.2943-0.3599 0.6145-0.4236 0.9605l-0.2804 1.5631c-0.0795 0.4812-0.0636 0.8809 0.0477 1.1991 0.1154 0.3182 0.3142 0.5568 0.5966 0.7159 0.2824 0.1551 0.6404 0.2327 1.0739 0.2327 0.2824 0 0.5469-0.0398 0.7935-0.1193 0.2505-0.0796 0.4733-0.1969 0.6681-0.352 0.1949-0.1591 0.354-0.356 0.4773-0.5906l2.3208 0.1551c-0.2148 0.5648-0.541 1.0579-0.9785 1.4795-0.4375 0.4176-0.9644 0.7438-1.5809 0.9784-0.6125 0.2307-1.2986 0.3461-2.0583 0.3461zm10.057 0c-0.9387 0-1.7162-0.1909-2.3327-0.5728-0.6165-0.3858-1.05-0.9306-1.3006-1.6346-0.2466-0.708-0.2883-1.5452-0.1252-2.5117 0.159-0.9426 0.4792-1.7699 0.9605-2.4818 0.4852-0.7119 1.0937-1.2668 1.8255-1.6645 0.7319-0.39772 1.5472-0.59659 2.4462-0.59659 0.604 0 1.151 0.09745 1.64 0.29233 0.494 0.19091 0.903 0.48125 1.229 0.87103 0.327 0.38581 0.549 0.86901 0.669 1.4497 0.123 0.5807 0.121 1.2608-6e-3 2.0403l-0.114 0.6981h-7.7315l0.2446-1.575h5.3459c0.059-0.366 0.035-0.6901-0.072-0.9725s-0.286-0.5031-0.537-0.6622c-0.251-0.1631-0.559-0.2446-0.925-0.2446-0.374 0-0.724 0.0915-1.0497 0.2744-0.3261 0.183-0.6005 0.4236-0.8233 0.7219-0.2187 0.2943-0.3599 0.6145-0.4236 0.9605l-0.2804 1.5631c-0.0795 0.4812-0.0636 0.8809 0.0478 1.1991 0.1153 0.3182 0.3142 0.5568 0.5966 0.7159 0.2824 0.1551 0.6403 0.2327 1.0736 0.2327 0.283 0 0.547-0.0398 0.794-0.1193 0.25-0.0796 0.473-0.1969 0.668-0.352 0.195-0.1591 0.354-0.356 0.477-0.5906l2.321 0.1551c-0.215 0.5648-0.541 1.0579-0.979 1.4795-0.437 0.4176-0.964 0.7438-1.58 0.9784-0.613 0.2307-1.299 0.3461-2.0587 0.3461zm12.306-9.3426-0.316 1.909h-5.524l0.322-1.909h5.518zm-3.907-2.1954h2.541l-1.42 8.5432c-0.039 0.2346-0.033 0.4176 0.018 0.5488 0.052 0.1273 0.137 0.2168 0.257 0.2685 0.123 0.0517 0.27 0.0776 0.441 0.0776 0.12 0 0.241-0.01 0.364-0.0299 0.123-0.0238 0.217-0.0417 0.281-0.0537l0.095 1.8912c-0.143 0.0438-0.336 0.0915-0.579 0.1432-0.238 0.0517-0.521 0.0835-0.847 0.0955-0.62 0.0238-1.145-0.0577-1.575-0.2446-0.429-0.1909-0.738-0.4833-0.925-0.877-0.186-0.3938-0.226-0.8889-0.119-1.4855l1.468-8.8773zm8.802-0.85909-2.028 12.218h-2.541l2.028-12.218h2.541zm4.16 12.397c-0.938 0-1.716-0.1909-2.332-0.5728-0.617-0.3858-1.05-0.9306-1.301-1.6346-0.247-0.708-0.288-1.5452-0.125-2.5117 0.159-0.9426 0.479-1.7699 0.96-2.4818 0.485-0.7119 1.094-1.2668 1.826-1.6645 0.732-0.39772 1.547-0.59659 2.446-0.59659 0.604 0 1.151 0.09745 1.64 0.29233 0.494 0.19091 0.903 0.48125 1.229 0.87103 0.327 0.38581 0.549 0.86901 0.669 1.4497 0.123 0.5807 0.121 1.2608-6e-3 2.0403l-0.114 0.6981h-7.732l0.245-1.575h5.345c0.06-0.366 0.036-0.6901-0.071-0.9725s-0.286-0.5031-0.537-0.6622c-0.251-0.1631-0.559-0.2446-0.925-0.2446-0.374 0-0.724 0.0915-1.05 0.2744-0.326 0.183-0.6 0.4236-0.823 0.7219-0.219 0.2943-0.36 0.6145-0.424 0.9605l-0.28 1.5631c-0.08 0.4812-0.064 0.8809 0.048 1.1991 0.115 0.3182 0.314 0.5568 0.596 0.7159 0.283 0.1551 0.641 0.2327 1.074 0.2327 0.283 0 0.547-0.0398 0.794-0.1193 0.25-0.0796 0.473-0.1969 0.668-0.352 0.195-0.1591 0.354-0.356 0.477-0.5906l2.321 0.1551c-0.215 0.5648-0.541 1.0579-0.979 1.4795-0.437 0.4176-0.964 0.7438-1.581 0.9784-0.612 0.2307-1.298 0.3461-2.058 0.3461z" fill="currentColor"/>
      </svg>
      <svg id="svg-copy" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <clipPath id="a"><path d="m4 0v6h6v6h6v-12" /></clipPath>
        <g stroke="currentColor" stroke-width="1.5">
          <rect x="1.75" y="5.75" width="8.5" height="8.5" rx="2.25" />
          <rect x="5.75" y="1.75" width="8.5" height="8.5" rx="2.25" clip-path="url(#a)" />
        </g>
      </svg>
    </div>
    <script>window.urlPrefix = "";

// Enable search if JavaScript is enabled.
document.querySelector(".search-box").style.removeProperty("display");

if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register(urlPrefix + "/service-worker.js");
}

const content = document.querySelector("article>.content");
const leftPane = document.querySelector(".left-pane");
const resizer = document.querySelector(".resizer");
resizer.addEventListener("mousedown", () => {
  resizer.classList.add("resizing");
  document.body.style.cursor = "col-resize";
  document.body.style.userSelect = document.body.style.webkitUserSelect = "none";
  document.addEventListener("mousemove", onMouseMove);
  document.addEventListener("mouseup", onMouseUp);
  function onMouseMove(e) {
    leftPane.style.width = Math.max(176, e.clientX) + "px";
    if (e.clientX < 130) {
      document.body.classList.add("sidenav-collapsed");
    } else if (e.clientX > 140) {
      document.body.classList.remove("sidenav-collapsed");
    }
  }
  function onMouseUp() {
    resizer.classList.remove("resizing");
    document.body.style.cursor = "";
    document.body.style.userSelect = document.body.style.webkitUserSelect = "";
    document.removeEventListener("mousemove", onMouseMove);
  }
});
resizer.addEventListener("dblclick", () => leftPane.style.removeProperty("width"));

const collapseButton = document.querySelector(".collapse-button");
collapseButton.addEventListener("click", () => document.body.classList.add("sidenav-collapsed"));
const expandButton = document.querySelector(".expand-button");
expandButton.addEventListener("click", () => document.body.classList.remove("sidenav-collapsed"));

const navSide = document.querySelector("nav.side");
const details = [...navSide.querySelectorAll("details")];

const menuButton = document.querySelector(".menu-button");
menuButton.addEventListener("click", () => {
  document.body.classList.toggle("mobile-expanded");
  if (leftPane.classList.contains("search-active")) closeSearch();
});

// Restore and save the state of the side navigation
const navSideState = JSON.parse(localStorage.getItem("navSideState"));
if (navSideState) {
  leftPane.style.width = navSideState.width;
  if (navSideState.collapsed) document.body.classList.add("sidenav-collapsed");
  navSideState.expanded.forEach((expanded, i) => {
    if (i < details.length) details[i].open = expanded
  });
  leftPane.scrollTop = navSideState.scrollTop;
}
window.addEventListener("beforeunload", () => {
  const navSideState = {
    width: leftPane.style.width,
    collapsed: document.body.classList.contains("sidenav-collapsed"),
    expanded: details.map(detail => detail.open),
    scrollTop: leftPane.scrollTop,
  };
  localStorage.setItem("navSideState", JSON.stringify(navSideState));
});

function syncSideNavWithLocation() {
  const target = document.querySelector("nav.side .target");
  if (target) target.classList.remove("target");

  const path = location.pathname;
  if (path.length > 1) {
    document.querySelectorAll("nav.side a").forEach(a => {
      if (a.href.endsWith(path)) {
        a.classList.add("target");
        for (let parent = a.parentElement; parent; parent = parent.parentElement) {
          if (parent.tagName === "DETAILS") parent.open = true;
        }
      }
    });
  }
}

syncSideNavWithLocation();

function addContentEventHandlers() {
  function copyCode(button) {
    let codeBlock = button.nextElementSibling;
    navigator.clipboard.writeText(codeBlock.innerText).then(() => {
      const before = button.innerHTML;
      button.innerText = "Copied!";
      setTimeout(() => button.innerHTML = before, 1000);
    });
  }

  content.querySelectorAll("button.copy").forEach(button =>
    button.addEventListener("click", () => copyCode(button))
  );
}

addContentEventHandlers();
</script>
    <script src="/js/search.js"></script>
  </body>
</html>
