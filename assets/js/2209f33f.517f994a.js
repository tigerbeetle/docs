"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5681],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>k});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=p(n),m=r,k=u["".concat(o,".").concat(m)]||u[m]||c[m]||i;return n?a.createElement(k,l(l({ref:t},d),{},{components:n})):a.createElement(k,l({ref:t},d))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=m;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[u]="string"==typeof e?e:r,l[1]=s;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3611:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const i={},l="Requests",s={unversionedId:"reference/requests/README",id:"reference/requests/README",title:"Requests",description:"A request queries or updates the database state.",source:"@site/pages/reference/requests/README.md",sourceDirName:"reference/requests",slug:"/reference/requests/",permalink:"/reference/requests/",draft:!1,editUrl:"https://github.com/tigerbeetle/tigerbeetle/blob/main/docs/reference/requests/README.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"QueryFilter",permalink:"/reference/query-filter"},next:{title:"create_accounts",permalink:"/reference/requests/create_accounts"}},o={},p=[{value:"Request Types",id:"request-types",level:2},{value:"Events and Results",id:"events-and-results",level:2},{value:"Idempotency",id:"idempotency",level:3},{value:"Batching Events",id:"batching-events",level:2},{value:"Linked Events",id:"linked-events",level:2},{value:"Linked Transfers Example",id:"linked-transfers-example",level:3},{value:"Guarantees",id:"guarantees",level:2}],d={toc:p},u="wrapper";function c(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"requests"},"Requests"),(0,r.kt)("p",null,"A ",(0,r.kt)("em",{parentName:"p"},"request")," queries or updates the database state."),(0,r.kt)("p",null,"A request consists of one or more ",(0,r.kt)("em",{parentName:"p"},"events")," of the same type sent to the cluster in a single message.\nFor example, a single request can create multiple transfers but it cannot create both accounts and\ntransfers."),(0,r.kt)("p",null,"The cluster commits an entire request at once. Events are applied in series, such that successive\nevents observe the effects of previous ones and event timestamps are\n",(0,r.kt)("a",{parentName:"p",href:"/coding/time#timestamps-are-totally-ordered"},"totally ordered"),"."),(0,r.kt)("p",null,"Each request receives one ",(0,r.kt)("em",{parentName:"p"},"reply")," message from the cluster. The reply contains one ",(0,r.kt)("em",{parentName:"p"},"result")," for each\nevent in the request."),(0,r.kt)("h2",{id:"request-types"},"Request Types"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/requests/create_accounts"},(0,r.kt)("inlineCode",{parentName:"a"},"create_accounts")),": create ",(0,r.kt)("a",{parentName:"li",href:"/reference/account"},(0,r.kt)("inlineCode",{parentName:"a"},"Account"),"s")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/requests/create_transfers"},(0,r.kt)("inlineCode",{parentName:"a"},"create_transfers")),": create ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer"),"s")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/requests/lookup_accounts"},(0,r.kt)("inlineCode",{parentName:"a"},"lookup_accounts")),": fetch ",(0,r.kt)("inlineCode",{parentName:"li"},"Account"),"s by ",(0,r.kt)("inlineCode",{parentName:"li"},"id")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/requests/lookup_transfers"},(0,r.kt)("inlineCode",{parentName:"a"},"lookup_transfers")),": fetch ",(0,r.kt)("inlineCode",{parentName:"li"},"Transfer"),"s by ",(0,r.kt)("inlineCode",{parentName:"li"},"id")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/requests/get_account_transfers"},(0,r.kt)("inlineCode",{parentName:"a"},"get_account_transfers")),": fetch ",(0,r.kt)("inlineCode",{parentName:"li"},"Transfer"),"s by ",(0,r.kt)("inlineCode",{parentName:"li"},"debit_account_id")," or\n",(0,r.kt)("inlineCode",{parentName:"li"},"credit_account_id")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/requests/get_account_balances"},(0,r.kt)("inlineCode",{parentName:"a"},"get_account_balances")),": fetch the historical account balance by the\n",(0,r.kt)("inlineCode",{parentName:"li"},"Account"),"'s ",(0,r.kt)("inlineCode",{parentName:"li"},"id"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/requests/query_accounts"},(0,r.kt)("inlineCode",{parentName:"a"},"query_accounts")),": query ",(0,r.kt)("inlineCode",{parentName:"li"},"Account"),"s"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/requests/query_transfers"},(0,r.kt)("inlineCode",{parentName:"a"},"query_transfers")),": query ",(0,r.kt)("inlineCode",{parentName:"li"},"Transfer"),"s")),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"More request types, including more powerful queries, are coming soon!")),(0,r.kt)("h2",{id:"events-and-results"},"Events and Results"),(0,r.kt)("p",null,"Each request has a corresponding ",(0,r.kt)("em",{parentName:"p"},"event")," and ",(0,r.kt)("em",{parentName:"p"},"result")," type:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Request Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Event"),(0,r.kt)("th",{parentName:"tr",align:null},"Result"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"create_accounts")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/requests/create_accounts#Event"},(0,r.kt)("inlineCode",{parentName:"a"},"Account"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/requests/create_accounts#Result"},(0,r.kt)("inlineCode",{parentName:"a"},"CreateAccountResult")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"create_transfers")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/requests/create_transfers#Event"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/requests/create_transfers#Result"},(0,r.kt)("inlineCode",{parentName:"a"},"CreateTransferResult")))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"lookup_accounts")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/requests/lookup_accounts#Event"},(0,r.kt)("inlineCode",{parentName:"a"},"Account.id"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/requests/lookup_accounts#Result"},(0,r.kt)("inlineCode",{parentName:"a"},"Account"))," or nothing")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"lookup_transfers")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/requests/lookup_transfers#Event"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.id"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/requests/lookup_transfers#Result"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer"))," or nothing")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"get_account_transfers")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/account-filter"},(0,r.kt)("inlineCode",{parentName:"a"},"AccountFilter"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/requests/get_account_transfers#Result"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer"))," or nothing")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"get_account_balances")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/account-filter"},(0,r.kt)("inlineCode",{parentName:"a"},"AccountFilter"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/requests/get_account_balances#Result"},(0,r.kt)("inlineCode",{parentName:"a"},"AccountBalance"))," or nothing")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"query_accounts")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/query-filter"},(0,r.kt)("inlineCode",{parentName:"a"},"QueryFilter"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/requests/lookup_accounts#Result"},(0,r.kt)("inlineCode",{parentName:"a"},"Account"))," or nothing")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"query_transfers")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/query-filter"},(0,r.kt)("inlineCode",{parentName:"a"},"QueryFilter"))),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"/reference/requests/lookup_transfers#Result"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer"))," or nothing")))),(0,r.kt)("h3",{id:"idempotency"},"Idempotency"),(0,r.kt)("p",null,"Events that create objects are idempotent. The first event to create an object with a given ",(0,r.kt)("inlineCode",{parentName:"p"},"id"),"\nwill receive the ",(0,r.kt)("inlineCode",{parentName:"p"},"ok")," result. Subsequent events that attempt to create the same object will receive\nthe ",(0,r.kt)("inlineCode",{parentName:"p"},"exists")," result."),(0,r.kt)("h2",{id:"batching-events"},"Batching Events"),(0,r.kt)("p",null,"To achieve high throughput, TigerBeetle amortizes the overhead of consensus and I/O by batching many\nevents in each request."),(0,r.kt)("p",null,"In the default configuration, the maximum batch sizes for each request type are:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Request Type"),(0,r.kt)("th",{parentName:"tr",align:"right"},"Request Batch Size (Events)"),(0,r.kt)("th",{parentName:"tr",align:"right"},"Reply Batch Size (Results)"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"lookup_accounts")),(0,r.kt)("td",{parentName:"tr",align:"right"},"8190"),(0,r.kt)("td",{parentName:"tr",align:"right"},"8190")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"lookup_transfers")),(0,r.kt)("td",{parentName:"tr",align:"right"},"8190"),(0,r.kt)("td",{parentName:"tr",align:"right"},"8190")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"create_accounts")),(0,r.kt)("td",{parentName:"tr",align:"right"},"8190"),(0,r.kt)("td",{parentName:"tr",align:"right"},"8190")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"create_transfers")),(0,r.kt)("td",{parentName:"tr",align:"right"},"8190"),(0,r.kt)("td",{parentName:"tr",align:"right"},"8190")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"get_account_transfers")),(0,r.kt)("td",{parentName:"tr",align:"right"},"1"),(0,r.kt)("td",{parentName:"tr",align:"right"},"8190")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"get_account_balances")),(0,r.kt)("td",{parentName:"tr",align:"right"},"1"),(0,r.kt)("td",{parentName:"tr",align:"right"},"8190")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"query_accounts")),(0,r.kt)("td",{parentName:"tr",align:"right"},"1"),(0,r.kt)("td",{parentName:"tr",align:"right"},"8190")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"query_transfers")),(0,r.kt)("td",{parentName:"tr",align:"right"},"1"),(0,r.kt)("td",{parentName:"tr",align:"right"},"8190")))),(0,r.kt)("p",null,"TigerBeetle clients automatically batch events. Therefore, it is recommended to share the client\ninstances between multiple threads or tasks to have events batched transparently."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/clients/node#batching"},"Node")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/clients/go#batching"},"Go")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/clients/java#batching"},"Java")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/clients/dotnet#batching"},".NET"))),(0,r.kt)("h2",{id:"linked-events"},"Linked Events"),(0,r.kt)("p",null,"Events within a request ",(0,r.kt)("a",{parentName:"p",href:"/reference/requests/create_transfers#result"},"succeed or fail")," independently unless they\nare explicitly linked using the ",(0,r.kt)("inlineCode",{parentName:"p"},"flags.linked")," (",(0,r.kt)("a",{parentName:"p",href:"/reference/account#flagslinked"},(0,r.kt)("inlineCode",{parentName:"a"},"Account.flags.linked")),"\nor ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagslinked"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.linked")),")."),(0,r.kt)("p",null,"When the ",(0,r.kt)("inlineCode",{parentName:"p"},"linked")," flag is specified, it links the outcome of a Transfer or Account creation with the\noutcome of the next one in the request. These chains of events will all succeed or fail together."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"The last event in a chain is denoted by the first Transfer or Account without this flag.")),(0,r.kt)("p",null,"The last Transfer or Account in a request may never have the ",(0,r.kt)("inlineCode",{parentName:"p"},"flags.linked")," set, as it would leave a\nchain open-ended. Attempting to do so will result in the\n",(0,r.kt)("a",{parentName:"p",href:"/reference/requests/create_transfers#linked_event_chain_open"},(0,r.kt)("inlineCode",{parentName:"a"},"linked_event_chain_open"))," error."),(0,r.kt)("p",null,"Multiple chains of events may coexist within a request to succeed or fail independently."),(0,r.kt)("p",null,"Events within a chain are executed in order, or are rolled back on error, so that the effect of each\nevent in the chain is visible to the next. Each chain is either visible or invisible as a unit to\nsubsequent transfers after the chain. The event that was the first to fail within a chain will have\na unique error result. Other events in the chain will have their error result set to\n",(0,r.kt)("a",{parentName:"p",href:"/reference/requests/create_transfers#linked_event_failed"},(0,r.kt)("inlineCode",{parentName:"a"},"linked_event_failed")),"."),(0,r.kt)("h3",{id:"linked-transfers-example"},"Linked Transfers Example"),(0,r.kt)("p",null,"Consider this set of Transfers as part of a request:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Transfer"),(0,r.kt)("th",{parentName:"tr",align:null},"Index in Request"),(0,r.kt)("th",{parentName:"tr",align:null},"flags.linked"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"A")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"0")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"false"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"B")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"1")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"true"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"C")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"2")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"true"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"D")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"3")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"false"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"E")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"4")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"false"))))),(0,r.kt)("p",null,"If any of transfers ",(0,r.kt)("inlineCode",{parentName:"p"},"B"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"C"),", or ",(0,r.kt)("inlineCode",{parentName:"p"},"D")," fail (for example, due to\n",(0,r.kt)("a",{parentName:"p",href:"/reference/requests/create_transfers#exceeds_credits"},(0,r.kt)("inlineCode",{parentName:"a"},"exceeds_credits")),"), then ",(0,r.kt)("inlineCode",{parentName:"p"},"B"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"C"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"D")," will all fail.\nThey are linked."),(0,r.kt)("p",null,"Transfers ",(0,r.kt)("inlineCode",{parentName:"p"},"A")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"E")," fail or succeed independently of ",(0,r.kt)("inlineCode",{parentName:"p"},"B"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"C"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"D"),", and each other."),(0,r.kt)("p",null,"After the chain of linked events has executed, the fact that they were linked will not be saved. To\nsave the association between Transfers or Accounts, it must be\n",(0,r.kt)("a",{parentName:"p",href:"/coding/data-modeling"},"encoded into the data model"),", for example by adding an ID to one of\nthe ",(0,r.kt)("a",{parentName:"p",href:"/coding/data-modeling#user_data"},"user data")," fields."),(0,r.kt)("h2",{id:"guarantees"},"Guarantees"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A request executes within the cluster at most once."),(0,r.kt)("li",{parentName:"ul"},"Requests do not ",(0,r.kt)("a",{parentName:"li",href:"/reference/sessions#retries"},"time out"),". Clients will continuously retry requests until\nthey receive a reply from the cluster. This is because in the case of a network partition, a lack\nof response from the cluster could either indicate that the request was dropped before it was\nprocessed or that the reply was dropped after the request was processed. Note that individual\n",(0,r.kt)("a",{parentName:"li",href:"/coding/two-phase-transfers"},"pending transfers")," within a request may have\n",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#timeout"},"timeouts"),"."),(0,r.kt)("li",{parentName:"ul"},"Requests retried by their original client session receive identical replies."),(0,r.kt)("li",{parentName:"ul"},"Requests retried by a different client (same request body, different session) may receive\ndifferent replies."),(0,r.kt)("li",{parentName:"ul"},"Events within a request are executed in sequence. The effects of a given event are observable when\nthe next event within that request is applied."),(0,r.kt)("li",{parentName:"ul"},"Events within a request do not interleave with events from other requests."),(0,r.kt)("li",{parentName:"ul"},"All events within a request batch are committed, or none are. Note that this does not mean that\nall of the events in a batch will succeed, or that all will fail. Events succeed or fail\nindependently unless they are explicitly ",(0,r.kt)("a",{parentName:"li",href:"#linked-events"},"linked")),(0,r.kt)("li",{parentName:"ul"},"Once committed, an event will always be committed \u2014 the cluster's state never backtracks."),(0,r.kt)("li",{parentName:"ul"},"Within a cluster, object\n",(0,r.kt)("a",{parentName:"li",href:"/coding/time#timestamps-are-totally-ordered"},"timestamps are unique and strictly increasing"),".\nNo two objects within the same cluster will have the same timestamp. Furthermore, the order of the\ntimestamps indicates the order in which the objects were committed.")))}c.isMDXComponent=!0}}]);