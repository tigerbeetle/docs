<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' plausible.io 'sha256-rYM+LWnbl1eC51wC99mmG1/1vbIKG5Iu3PIVsq1rAxg='">
    <meta name="description" content="The financial transactions database to power the next 30 years of Online Transaction Processing.">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@TigerBeetleDB">
    <meta name="twitter:author" content="@TigerBeetleDB">
    <meta name="twitter:description" content="The financial transactions database to power the next 30 years of Online Transaction Processing.">
    <meta name="twitter:title" content="`Transfer` | TigerBeetle Docs">
    <meta name="twitter:image" content="https://docs.tigerbeetle.com/img/preview.webp">
    <meta property="og:type" content="website">
    <meta property="og:title" content="`Transfer` | TigerBeetle Docs">
    <meta property="og:image" content="https://docs.tigerbeetle.com/img/preview.webp">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="TigerBeetle Team">
    <title id="title">`Transfer` | TigerBeetle Docs</title>
    <link rel="icon" href="/img/favicon.png">
    <link rel="stylesheet" type="text/css" href="/style/style.css">
    <link rel="stylesheet" type="text/css" href="/style/highlight.css">
    <script defer data-domain="docs.tigerbeetle.com" src="https://plausible.io/js/script.js"></script>
  </head>
  <body>
    <a class="expand-button" title="Show menu">
      <div>
        <svg width="28" height="24" viewBox="0 0 28 24" aria-label="TigerBeetle logo">
          <use href="#svg-tigerbeetle-logo"></use>
        </svg>
        <svg class="tick" width="16" height="16" fill="none">
          <path d="M7 5L10 8L7 11" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"/>
        </svg>
      </div>
    </a>
    <nav class="left-pane">
      <div class="top-wrapper">
        <div class="top">
          <header>
            <div class="logo">
              <a href="https://tigerbeetle.com" aria-label="TigerBeetle website">
                <svg width="127" height="24" viewBox="0 0 127 24" aria-label="TigerBeetle logo">
                  <use href="#svg-tigerbeetle-logo"></use>
                </svg>
              </a>
            </div>
            <div class="line"></div>
            <a href="/">Docs</a>
            <div class="spacer"></div>
            <a class="menu-button">
              <svg class="icon-burger" width="24" height="24">
                <path d="M2.5 5.5 21.5 5.5M2.5 12 21.5 12M2.5 18.5 21.5 18.5" stroke-width="1.5" stroke-linecap="round" stroke="currentColor" />
              </svg>
              <svg class="icon-x" width="24" height="24" fill="none">
                <path d="M6 6 18 18M6 18 18 6" stroke-width="1.5" stroke-linecap="round" stroke="currentColor" />
              </svg>
            </a>
            <a class="collapse-button" title="Hide menu">
              <svg width="16" height="16" fill="none">
                <path d="M7 5L4 8L7 11M12 5L9 8L12 11" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"/>
              </svg>
            </a>
          </header>
          <div class="search-box" style="display: none;">
            <input type="search" placeholder="Search" />
            <svg class="search-icon" width="16" height="16" fill="none">
              <circle cx="6.5" cy="6.5" r="4.5" stroke-width="1.5" stroke="currentColor"/>
              <path d="M10 10l4 4" stroke-width="1.5" stroke-linecap="round" stroke="currentColor"/>
            </svg>
            <svg class="hotkey" width="16" height="16" fill="none">
              <rect x="0.5" y="0.5" width="15" height="15" rx="2.5" stroke="var(--gray-7)"/>
              <path d="M9.55584 3.38636L7.21209 12.0938H6.44505L8.7888 3.38636H9.55584Z" fill="var(--gray-11)"/>
            </svg>    
            <svg class="clear-button" width="16" height="16">
              <path d="m16 8a8 8 0 0 0-16 0 8 8 0 0 0 16 0m-9 0-2.5-2.5 1-1 2.5 2.5 2.5-2.5 1 1-2.5 2.5 2.5 2.5-1 1-2.5-2.5-2.5 2.5-1-1" fill="currentColor" />
            </svg>
          </div>
          <p class="search-stats"></p>
        </div>
      </div>
      <div class="search-results"></div>
      <div class="search-notfound">
        <picture>
          <source width="158" height="119" srcset="/img/notfound-light.webp" media="(prefers-color-scheme: light)"/>
          <source width="160" height="119" srcset="/img/notfound-dark.webp" media="(prefers-color-scheme: dark)"/>
          <img width="158" height="119" src="/img/notfound-light.webp"/>
        </picture>
        <p>
          Still haven't found what you're looking for?<br>
          <a href="https://join.slack.com/t/tigerbeetle/shared_invite/zt-21xk62q7l-p~~G7~H01zQb88rQn7tWfQ">Ask the TigerBeetle Slack Community.</a>
        </p>
      </div>
      <nav class="side">
        <ol><li class="item"><a href="/quick-start/">Quick Start</a></li><li><details><summary class="item"><a href="/coding/">Coding</a></summary><ol><li class="item"><a href="/coding/system-architecture/">TigerBeetle in Your System Architecture</a></li><li class="item"><a href="/coding/data-modeling/">Data Modeling</a></li><li class="item"><a href="/coding/financial-accounting/">Financial Accounting</a></li><li class="item"><a href="/coding/two-phase-transfers/">Two-Phase Transfers</a></li><li class="item"><a href="/coding/reliable-transaction-submission/">Reliable Transaction Submission</a></li><li class="item"><a href="/coding/time/">Time</a></li><li><details><summary class="item">Recipes</summary><ol><li class="item"><a href="/coding/recipes/currency-exchange/">Currency Exchange</a></li><li class="item"><a href="/coding/recipes/multi-debit-credit-transfers/">Multi-Debit, Multi-Credit Transfers</a></li><li class="item"><a href="/coding/recipes/close-account/">Close Account</a></li><li class="item"><a href="/coding/recipes/balance-conditional-transfers/">Balance-Conditional Transfers</a></li><li class="item"><a href="/coding/recipes/balance-bounds/">Balance Bounds</a></li><li class="item"><a href="/coding/recipes/correcting-transfers/">Correcting Transfers</a></li><li class="item"><a href="/coding/recipes/rate-limiting/">Rate Limiting</a></li><li class="item"><a href="/coding/recipes/balance-invariant-transfers/">Balance-invariant Transfers</a></li></ol></details></li></ol></details></li><li><details><summary class="item">Operating</summary><ol><li class="item"><a href="/operating/deploy/">Deploying for Production</a></li><li class="item"><a href="/operating/hardware/">Hardware</a></li><li class="item"><a href="/operating/linux/">Deploying on Linux</a></li><li class="item"><a href="/operating/docker/">Docker</a></li><li class="item"><a href="/operating/managed-service/">Managed Service</a></li><li class="item"><a href="/operating/upgrading/">Upgrading</a></li></ol></details></li><li><details><summary class="item">Client Libraries</summary><ol><li class="item"><a href="/clients/go/">Go</a></li><li class="item"><a href="/clients/java/">Java</a></li><li class="item"><a href="/clients/dotnet/">.NET</a></li><li class="item"><a href="/clients/node/">Node.js</a></li><li class="item"><a href="/clients/python/">Python</a></li></ol></details></li><li><details open><summary class="item">Reference</summary><ol><li class="item"><a href="/reference/account/">Account</a></li><li class="item"><a href="/reference/transfer/" class="target">Transfer</a></li><li class="item"><a href="/reference/account-balance/">AccountBalance</a></li><li class="item"><a href="/reference/account-filter/">AccountFilter</a></li><li class="item"><a href="/reference/query-filter/">QueryFilter</a></li><li><details><summary class="item"><a href="/reference/requests/">Requests</a></summary><ol><li class="item"><a href="/reference/requests/create_accounts/">create_accounts</a></li><li class="item"><a href="/reference/requests/create_transfers/">create_transfers</a></li><li class="item"><a href="/reference/requests/get_account_balances/">get_account_balances</a></li><li class="item"><a href="/reference/requests/get_account_transfers/">get_account_transfers</a></li><li class="item"><a href="/reference/requests/lookup_accounts/">lookup_accounts</a></li><li class="item"><a href="/reference/requests/lookup_transfers/">lookup_transfers</a></li><li class="item"><a href="/reference/requests/query_accounts/">query_accounts</a></li><li class="item"><a href="/reference/requests/query_transfers/">query_transfers</a></li></ol></details></li><li class="item"><a href="/reference/sessions/">Client Sessions</a></li></ol></details></li><li><details><summary class="item"><a href="/about/">About</a></summary><ol><li class="item"><a href="/about/oltp/">Built for OLTP</a></li><li class="item"><a href="/about/performance/">Performance</a></li><li class="item"><a href="/about/safety/">Safety</a></li><li class="item"><a href="/about/vopr/">Deterministic Simulation Testing</a></li><li class="item"><a href="/about/architecture/">Architecture</a></li><li class="item"><a href="/about/production-ready/">Production Ready</a></li><li class="item"><a href="/about/zig/">Zig</a></li></ol></details></li></ol>
      </nav>
    </nav>
    <div class="resizer"></div>
    <main>
      <article>
        <div class="content">
          <h1 id="transfer"><a href="#transfer"
class="anchor"><code>Transfer</code></a></h1>
<p>A <code>transfer</code> is an immutable record of a financial
transaction between two accounts.</p>
<p>In TigerBeetle, financial transactions are called “transfers” instead
of “transactions” because the latter term is heavily overloaded in the
context of databases.</p>
<p>Note that transfers debit a single account and credit a single
account on the same ledger. You can compose these into more complex
transactions using the methods described in <a
href="../../coding/recipes/currency-exchange">Currency Exchange</a> and
<a href="../../coding/recipes/multi-debit-credit-transfers">Multi-Debit,
Multi-Credit Transfers</a>.</p>
<h3 id="updates"><a href="#updates" class="anchor">Updates</a></h3>
<p>Transfers <em>cannot be modified</em> after creation.</p>
<p>If a detail of a transfer is incorrect and needs to be modified, this
is done using <a
href="../../coding/recipes/correcting-transfers">correcting
transfers</a>.</p>
<h3 id="deletion"><a href="#deletion" class="anchor">Deletion</a></h3>
<p>Transfers <em>cannot be deleted</em> after creation.</p>
<p>If a transfer is made in error, its effects can be reversed using a
<a href="../../coding/recipes/correcting-transfers">correcting
transfer</a>.</p>
<h3 id="guarantees"><a href="#guarantees"
class="anchor">Guarantees</a></h3>
<ul>
<li>Transfers are immutable. They are never modified once they are
successfully created.</li>
<li>There is at most one <code>Transfer</code> with a particular <a
href="#id"><code>id</code></a>.</li>
<li>A <a
href="../../coding/two-phase-transfers#reserve-funds-pending-transfer">pending
transfer</a> resolves at most once.</li>
<li>Transfer <a href="#timeout">timeouts</a> are deterministic, driven
by the <a
href="../../coding/time#why-tigerbeetle-manages-timestamps">cluster’s
timestamp</a>.</li>
</ul>
<h2 id="modes"><a href="#modes" class="anchor">Modes</a></h2>
<p>Transfers can either be Single-Phase, where they are executed
immediately, or Two-Phase, where they are first put in a Pending state
and then either Posted or Voided. For more details on the latter, see
the <a href="../../coding/two-phase-transfers">Two-Phase Transfer
guide</a>.</p>
<p>Fields used by each mode of transfer:</p>
<div class="table">
<table>
<thead>
<tr>
<th>Field</th>
<th>Single-Phase</th>
<th>Pending</th>
<th>Post-Pending</th>
<th>Void-Pending</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td>required</td>
<td>required</td>
<td>required</td>
<td>required</td>
</tr>
<tr>
<td><code>debit_account_id</code></td>
<td>required</td>
<td>required</td>
<td>optional</td>
<td>optional</td>
</tr>
<tr>
<td><code>credit_account_id</code></td>
<td>required</td>
<td>required</td>
<td>optional</td>
<td>optional</td>
</tr>
<tr>
<td><code>amount</code></td>
<td>required</td>
<td>required</td>
<td>required</td>
<td>optional</td>
</tr>
<tr>
<td><code>pending_id</code></td>
<td>none</td>
<td>none</td>
<td>required</td>
<td>required</td>
</tr>
<tr>
<td><code>user_data_128</code></td>
<td>optional</td>
<td>optional</td>
<td>optional</td>
<td>optional</td>
</tr>
<tr>
<td><code>user_data_64</code></td>
<td>optional</td>
<td>optional</td>
<td>optional</td>
<td>optional</td>
</tr>
<tr>
<td><code>user_data_32</code></td>
<td>optional</td>
<td>optional</td>
<td>optional</td>
<td>optional</td>
</tr>
<tr>
<td><code>timeout</code></td>
<td>none</td>
<td>optional¹</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td><code>ledger</code></td>
<td>required</td>
<td>required</td>
<td>optional</td>
<td>optional</td>
</tr>
<tr>
<td><code>code</code></td>
<td>required</td>
<td>required</td>
<td>optional</td>
<td>optional</td>
</tr>
<tr>
<td><code>flags.linked</code></td>
<td>optional</td>
<td>optional</td>
<td>optional</td>
<td>optional</td>
</tr>
<tr>
<td><code>flags.pending</code></td>
<td>false</td>
<td>true</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td><code>flags.post_pending_transfer</code></td>
<td>false</td>
<td>false</td>
<td>true</td>
<td>false</td>
</tr>
<tr>
<td><code>flags.void_pending_transfer</code></td>
<td>false</td>
<td>false</td>
<td>false</td>
<td>true</td>
</tr>
<tr>
<td><code>flags.balancing_debit</code></td>
<td>optional</td>
<td>optional</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td><code>flags.balancing_credit</code></td>
<td>optional</td>
<td>optional</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td><code>flags.closing_debit</code></td>
<td>optional</td>
<td>true</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td><code>flags.closing_credit</code></td>
<td>optional</td>
<td>true</td>
<td>false</td>
<td>false</td>
</tr>
<tr>
<td><code>flags.imported</code></td>
<td>optional</td>
<td>optional</td>
<td>optional</td>
<td>optional</td>
</tr>
<tr>
<td><code>timestamp</code></td>
<td>none²</td>
<td>none²</td>
<td>none²</td>
<td>none²</td>
</tr>
</tbody>
</table>
</div>
<blockquote>
<p><em>¹ None if <code>flags.imported</code> is set.</em><br/> <em>²
Required if <code>flags.imported</code> is set.</em></p>
</blockquote>
<h2 id="fields"><a href="#fields" class="anchor">Fields</a></h2>
<h3 id="id"><a href="#id" class="anchor"><code>id</code></a></h3>
<p>This is a unique identifier for the transaction.</p>
<p>Constraints:</p>
<ul>
<li>Type is 128-bit unsigned integer (16 bytes)</li>
<li>Must not be zero or <code>2^128 - 1</code></li>
<li>Must not conflict with another transfer in the cluster</li>
</ul>
<p>See the <a href="../../coding/data-modeling#id"><code>id</code>
section in the data modeling doc</a> for more recommendations on
choosing an ID scheme.</p>
<p>Note that transfer IDs are unique for the cluster – not the ledger.
If you want to store a relationship between multiple transfers, such as
indicating that multiple transfers on different ledgers were part of a
single transaction, you should store a transaction ID in one of the <a
href="#user_data_128"><code>user_data</code></a> fields.</p>
<h3 id="debit_account_id"><a href="#debit_account_id"
class="anchor"><code>debit_account_id</code></a></h3>
<p>This refers to the account to debit the transfer’s <a
href="#amount"><code>amount</code></a>.</p>
<p>Constraints:</p>
<ul>
<li>Type is 128-bit unsigned integer (16 bytes)</li>
<li>When <code>flags.post_pending_transfer</code> and
<code>flags.void_pending_transfer</code> are <em>not</em> set:
<ul>
<li>Must match an existing account</li>
<li>Must not be the same as <code>credit_account_id</code></li>
</ul></li>
<li>When <code>flags.post_pending_transfer</code> or
<code>flags.void_pending_transfer</code> are set:
<ul>
<li>If <code>debit_account_id</code> is zero, it will be automatically
set to the pending transfer’s <code>debit_account_id</code>.</li>
<li>If <code>debit_account_id</code> is nonzero, it must match the
corresponding pending transfer’s <code>debit_account_id</code>.</li>
</ul></li>
<li>When <code>flags.imported</code> is set:
<ul>
<li>The matching account’s <a href="../account#timestamp">timestamp</a>
must be less than or equal to the transfer’s <a
href="#timestamp">timestamp</a>.</li>
</ul></li>
</ul>
<h3 id="credit_account_id"><a href="#credit_account_id"
class="anchor"><code>credit_account_id</code></a></h3>
<p>This refers to the account to credit the transfer’s <a
href="#amount"><code>amount</code></a>.</p>
<p>Constraints:</p>
<ul>
<li>Type is 128-bit unsigned integer (16 bytes)</li>
<li>When <code>flags.post_pending_transfer</code> and
<code>flags.void_pending_transfer</code> are <em>not</em> set:
<ul>
<li>Must match an existing account</li>
<li>Must not be the same as <code>debit_account_id</code></li>
</ul></li>
<li>When <code>flags.post_pending_transfer</code> or
<code>flags.void_pending_transfer</code> are set:
<ul>
<li>If <code>credit_account_id</code> is zero, it will be automatically
set to the pending transfer’s <code>credit_account_id</code>.</li>
<li>If <code>credit_account_id</code> is nonzero, it must match the
corresponding pending transfer’s <code>credit_account_id</code>.</li>
</ul></li>
<li>When <code>flags.imported</code> is set:
<ul>
<li>The matching account’s <a href="../account#timestamp">timestamp</a>
must be less than or equal to the transfer’s <a
href="#timestamp">timestamp</a>.</li>
</ul></li>
</ul>
<h3 id="amount"><a href="#amount"
class="anchor"><code>amount</code></a></h3>
<p>This is how much should be debited from the
<code>debit_account_id</code> account and credited to the
<code>credit_account_id</code> account.</p>
<p>Note that this is an unsigned 128-bit integer. You can read more
about using <a
href="../../coding/data-modeling#debits-vs-credits">debits and
credits</a> to represent positive and negative balances as well as <a
href="../../coding/data-modeling#fractional-amounts-and-asset-scale">fractional
amounts and asset scales</a>.</p>
<ul>
<li>When <code>flags.balancing_debit</code> is set, this is the maximum
amount that will be debited/credited, where the actual transfer amount
is determined by the debit account’s constraints.</li>
<li>When <code>flags.balancing_credit</code> is set, this is the maximum
amount that will be debited/credited, where the actual transfer amount
is determined by the credit account’s constraints.</li>
<li>When <code>flags.post_pending_transfer</code> is set, the amount
posted will be:
<ul>
<li>the pending transfer’s amount, when the posted transfer’s
<code>amount</code> is <code>AMOUNT_MAX</code></li>
<li>the posting transfer’s amount, when the posted transfer’s
<code>amount</code> is less than or equal to the pending transfer’s
amount.</li>
</ul></li>
</ul>
<p>Constraints:</p>
<ul>
<li>Type is 128-bit unsigned integer (16 bytes)</li>
<li>When <code>flags.void_pending_transfer</code> is set:
<ul>
<li>If <code>amount</code> is zero, it will be automatically be set to
the pending transfer’s <code>amount</code>.</li>
<li>If <code>amount</code> is nonzero, it must be equal to the pending
transfer’s <code>amount</code>.</li>
</ul></li>
<li>When <code>flags.post_pending_transfer</code> is set:
<ul>
<li>If <code>amount</code> is <code>AMOUNT_MAX</code>
(<code>2^128 - 1</code>), it will automatically be set to the pending
transfer’s <code>amount</code>.</li>
<li>If <code>amount</code> is not <code>AMOUNT_MAX</code>, it must be
less than or equal to the pending transfer’s <code>amount</code>.</li>
</ul></li>
</ul>
<details>
<summary>Client release &lt; 0.16.0</summary>

<p>Additional constraints:</p>
<ul>
<li>When <code>flags.post_pending_transfer</code> is set:
<ul>
<li>If <code>amount</code> is zero, it will be automatically be set to
the pending transfer’s <code>amount</code>.</li>
<li>If <code>amount</code> is nonzero, it must be less than or equal to
the pending transfer’s <code>amount</code>.</li>
</ul></li>
<li>When <code>flags.balancing_debit</code> and/or
<code>flags.balancing_credit</code> is set, if <code>amount</code> is
zero, it will automatically be set to the maximum amount that does not
violate the corresponding account limits. (Equivalent to setting
<code>amount = 2^128 - 1</code>).</li>
<li>When all of the following flags are not set, <code>amount</code>
must be nonzero:
<ul>
<li><code>flags.post_pending_transfer</code></li>
<li><code>flags.void_pending_transfer</code></li>
<li><code>flags.balancing_debit</code></li>
<li><code>flags.balancing_credit</code></li>
</ul></li>
</ul>
</details>

<h4 id="examples"><a href="#examples" class="anchor">Examples</a></h4>
<ul>
<li>For representing fractional amounts (e.g. <code>$12.34</code>), see
<a
href="../../coding/data-modeling#fractional-amounts-and-asset-scale">Fractional
Amounts</a>.</li>
<li>For balancing transfers, see <a
href="../../coding/recipes/close-account">Close Account</a>.</li>
</ul>
<h3 id="pending_id"><a href="#pending_id"
class="anchor"><code>pending_id</code></a></h3>
<p>If this transfer will post or void a pending transfer,
<code>pending_id</code> references that pending transfer. If this is not
a post or void transfer, it must be zero.</p>
<p>See the section on <a
href="../../coding/two-phase-transfers">Two-Phase Transfers</a> for more
information on how the <code>pending_id</code> is used.</p>
<p>Constraints:</p>
<ul>
<li>Type is 128-bit unsigned integer (16 bytes)</li>
<li>Must be zero if neither void nor pending transfer flag is set</li>
<li>Must match an existing transfer’s <a href="#id"><code>id</code></a>
if non-zero</li>
</ul>
<h3 id="user_data_128"><a href="#user_data_128"
class="anchor"><code>user_data_128</code></a></h3>
<p>This is an optional 128-bit secondary identifier to link this
transfer to an external entity or event.</p>
<p>When set to zero, no secondary identifier will be associated with the
account, therefore only non-zero values can be used as <a
href="../query-filter">query filter</a>.</p>
<p>When set to zero, if <a
href="#flagspost_pending_transfer"><code>flags.post_pending_transfer</code></a>
or <a
href="#flagsvoid_pending_transfer"><code>flags.void_pending_transfer</code></a>
is set, then it will be automatically set to the pending transfer’s
<code>user_data_128</code>.</p>
<p>As an example, you might generate a <a
href="../../coding/data-modeling#tigerbeetle-time-based-identifiers-recommended">TigerBeetle
Time-Based Identifier</a> that ties together a group of transfers.</p>
<p>For more information, see <a
href="../../coding/data-modeling#user_data">Data Modeling</a>.</p>
<p>Constraints:</p>
<ul>
<li>Type is 128-bit unsigned integer (16 bytes)</li>
</ul>
<h3 id="user_data_64"><a href="#user_data_64"
class="anchor"><code>user_data_64</code></a></h3>
<p>This is an optional 64-bit secondary identifier to link this transfer
to an external entity or event.</p>
<p>When set to zero, no secondary identifier will be associated with the
account, therefore only non-zero values can be used as <a
href="../query-filter">query filter</a>.</p>
<p>When set to zero, if <a
href="#flagspost_pending_transfer"><code>flags.post_pending_transfer</code></a>
or <a
href="#flagsvoid_pending_transfer"><code>flags.void_pending_transfer</code></a>
is set, then it will be automatically set to the pending transfer’s
<code>user_data_64</code>.</p>
<p>As an example, you might use this field store an external
timestamp.</p>
<p>For more information, see <a
href="../../coding/data-modeling#user_data">Data Modeling</a>.</p>
<p>Constraints:</p>
<ul>
<li>Type is 64-bit unsigned integer (8 bytes)</li>
</ul>
<h3 id="user_data_32"><a href="#user_data_32"
class="anchor"><code>user_data_32</code></a></h3>
<p>This is an optional 32-bit secondary identifier to link this transfer
to an external entity or event.</p>
<p>When set to zero, no secondary identifier will be associated with the
account, therefore only non-zero values can be used as <a
href="../query-filter">query filter</a>.</p>
<p>When set to zero, if <a
href="#flagspost_pending_transfer"><code>flags.post_pending_transfer</code></a>
or <a
href="#flagsvoid_pending_transfer"><code>flags.void_pending_transfer</code></a>
is set, then it will be automatically set to the pending transfer’s
<code>user_data_32</code>.</p>
<p>As an example, you might use this field to store a timezone or
locale.</p>
<p>For more information, see <a
href="../../coding/data-modeling#user_data">Data Modeling</a>.</p>
<p>Constraints:</p>
<ul>
<li>Type is 32-bit unsigned integer (4 bytes)</li>
</ul>
<h3 id="timeout"><a href="#timeout"
class="anchor"><code>timeout</code></a></h3>
<p>This is the interval in seconds after a <a
href="#flagspending"><code>pending</code></a> transfer’s <a
href="#timestamp">arrival at the cluster</a> that it may be <a
href="#flagspost_pending_transfer">posted</a> or <a
href="#flagsvoid_pending_transfer">voided</a>. Zero denotes absence of
timeout.</p>
<p>Non-pending transfers cannot have a timeout.</p>
<p>Imported transfers cannot have a timeout.</p>
<p>TigerBeetle makes a best-effort approach to remove pending balances
of expired transfers automatically:</p>
<ul>
<li><p>Transfers expire <em>exactly</em> at their expiry time (<a
href="#timestamp"><code>timestamp</code></a> <em>plus</em>
<code>timeout</code> converted in nanoseconds).</p></li>
<li><p>Pending balances will never be removed before its
expiry.</p></li>
<li><p>Expired transfers cannot be manually posted or voided.</p></li>
<li><p>It is not guaranteed that the pending balance will be removed
exactly at its expiry.</p>
<p>In particular, client requests may observe still-pending balances for
expired transfers.</p></li>
<li><p>Pending balances are removed in chronological order by expiry. If
multiple transfers expire at the same time, then ordered by the
transfer’s creation <a href="#timestamp"><code>timestamp</code></a>.</p>
<p>If a transfer <code>A</code> has expiry <code>E₁</code> and transfer
<code>B</code> has expiry <code>E₂</code>, and <code>E₁&lt;E₂</code>, if
transfer <code>B</code> had the pending balance removed, then transfer
<code>A</code> had the pending balance removed as well.</p></li>
</ul>
<p>Constraints:</p>
<ul>
<li>Type is 32-bit unsigned integer (4 bytes)</li>
<li>Must be zero if <code>flags.pending</code> is <em>not</em> set</li>
<li>Must be zero if <code>flags.imported</code> is set.</li>
</ul>
<p>The <code>timeout</code> is an interval in seconds rather than an
absolute timestamp because this is more robust to clock skew between the
cluster and the application. (Watch this talk on <a
href="https://youtu.be/7R-Iz6sJG6Q?si=9sD2TpfD29AxUjOY">Detecting Clock
Sync Failure in Highly Available Systems</a> on YouTube for more
details.)</p>
<h3 id="ledger"><a href="#ledger"
class="anchor"><code>ledger</code></a></h3>
<p>This is an identifier that partitions the sets of accounts that can
transact with each other.</p>
<p>See <a href="../../coding/data-modeling#ledgers">data modeling</a>
for more details about how to think about setting up your ledgers.</p>
<p>Constraints:</p>
<ul>
<li>Type is 32-bit unsigned integer (4 bytes)</li>
<li>When <code>flags.post_pending_transfer</code> or
<code>flags.void_pending_transfer</code> is set:
<ul>
<li>If <code>ledger</code> is zero, it will be automatically be set to
the pending transfer’s <code>ledger</code>.</li>
<li>If <code>ledger</code> is nonzero, it must match the
<code>ledger</code> value on the pending transfer’s
<code>debit_account_id</code> <strong>and</strong>
<code>credit_account_id</code>.</li>
</ul></li>
<li>When <code>flags.post_pending_transfer</code> and
<code>flags.void_pending_transfer</code> are not set:
<ul>
<li><code>ledger</code> must not be zero.</li>
<li><code>ledger</code> must match the <code>ledger</code> value on the
accounts referenced in <code>debit_account_id</code>
<strong>and</strong> <code>credit_account_id</code>.</li>
</ul></li>
</ul>
<h3 id="code"><a href="#code" class="anchor"><code>code</code></a></h3>
<p>This is a user-defined enum denoting the reason for (or category of)
the transfer.</p>
<p>Constraints:</p>
<ul>
<li>Type is 16-bit unsigned integer (2 bytes)</li>
<li>When <code>flags.post_pending_transfer</code> or
<code>flags.void_pending_transfer</code> is set:
<ul>
<li>If <code>code</code> is zero, it will be automatically be set to the
pending transfer’s <code>code</code>.</li>
<li>If <code>code</code> is nonzero, it must match the pending
transfer’s <code>code</code>.</li>
</ul></li>
<li>When <code>flags.post_pending_transfer</code> and
<code>flags.void_pending_transfer</code> are not set, <code>code</code>
must not be zero.</li>
</ul>
<h3 id="flags"><a href="#flags"
class="anchor"><code>flags</code></a></h3>
<p>This specifies (optional) transfer behavior.</p>
<p>Constraints:</p>
<ul>
<li>Type is 16-bit unsigned integer (2 bytes)</li>
<li>Some flags are mutually exclusive; see <a
href="../requests/create_transfers#flags_are_mutually_exclusive"><code>flags_are_mutually_exclusive</code></a>.</li>
</ul>
<h4 id="flagslinked"><a href="#flagslinked"
class="anchor"><code>flags.linked</code></a></h4>
<p>This flag links the result of this transfer to the outcome of the
next transfer in the request such that they will either succeed or fail
together.</p>
<p>The last transfer in a chain of linked transfers does
<strong>not</strong> have this flag set.</p>
<p>You can read more about <a href="../requests/#linked-events">linked
events</a>.</p>
<h5 id="examples-1"><a href="#examples-1"
class="anchor">Examples</a></h5>
<ul>
<li><a href="../../coding/recipes/currency-exchange">Currency
Exchange</a></li>
</ul>
<h4 id="flagspending"><a href="#flagspending"
class="anchor"><code>flags.pending</code></a></h4>
<p>Mark the transfer as a <a
href="../../coding/two-phase-transfers#reserve-funds-pending-transfer">pending
transfer</a>.</p>
<h4 id="flagspost_pending_transfer"><a
href="#flagspost_pending_transfer"
class="anchor"><code>flags.post_pending_transfer</code></a></h4>
<p>Mark the transfer as a <a
href="../../coding/two-phase-transfers#post-pending-transfer">post-pending
transfer</a>.</p>
<h4 id="flagsvoid_pending_transfer"><a
href="#flagsvoid_pending_transfer"
class="anchor"><code>flags.void_pending_transfer</code></a></h4>
<p>Mark the transfer as a <a
href="../../coding/two-phase-transfers#void-pending-transfer">void-pending
transfer</a>.</p>
<h4 id="flagsbalancing_debit"><a href="#flagsbalancing_debit"
class="anchor"><code>flags.balancing_debit</code></a></h4>
<p>Transfer at most <a href="#amount"><code>amount</code></a> —
automatically transferring less than <code>amount</code> as necessary
such that
<code>debit_account.debits_pending + debit_account.debits_posted ≤ debit_account.credits_posted</code>.</p>
<p>The <code>amount</code> of the recorded transfer is set to the actual
amount that was transferred, which is less than or equal to the amount
that was passed to <code>create_transfers</code>.</p>
<p>Retrying a balancing transfer will return <a
href="../requests/create_transfers#exists_with_different_amount"><code>exists_with_different_amount</code></a>
only when the maximum amount passed to <code>create_transfers</code> is
insufficient to fulfill the amount that was actually transferred.
Otherwise it may return <a
href="../requests/create_transfers#exists"><code>exists</code></a> even
if the retry amount differs from the original value.</p>
<p><code>flags.balancing_debit</code> is exclusive with the
<code>flags.post_pending_transfer</code>/<code>flags.void_pending_transfer</code>
flags because posting or voiding a pending transfer will never
exceed/overflow either account’s limits.</p>
<p><code>flags.balancing_debit</code> is compatible with (and orthogonal
to) <code>flags.balancing_credit</code>.</p>
<details>
<summary>Client release &lt; 0.16.0</summary>

<p>Transfer at most <a href="#amount"><code>amount</code></a> —
automatically transferring less than <code>amount</code> as necessary
such that
<code>debit_account.debits_pending + debit_account.debits_posted ≤ debit_account.credits_posted</code>.
If <code>amount</code> is set to <code>0</code>, transfer at most
<code>2^64 - 1</code> (i.e. as much as possible).</p>
<p>If the highest amount transferable is <code>0</code>, returns <a
href="../requests/create_transfers#exceeds_credits"><code>exceeds_credits</code></a>.</p>
</details>

<h5 id="examples-2"><a href="#examples-2"
class="anchor">Examples</a></h5>
<ul>
<li><a href="../../coding/recipes/close-account">Close Account</a></li>
</ul>
<h4 id="flagsbalancing_credit"><a href="#flagsbalancing_credit"
class="anchor"><code>flags.balancing_credit</code></a></h4>
<p>Transfer at most <a href="#amount"><code>amount</code></a> —
automatically transferring less than <code>amount</code> as necessary
such that
<code>credit_account.credits_pending + credit_account.credits_posted ≤ credit_account.debits_posted</code>.</p>
<p>The <code>amount</code> of the recorded transfer is set to the actual
amount that was transferred, which is less than or equal to the amount
that was passed to <code>create_transfers</code>.</p>
<p>Retrying a balancing transfer will return <a
href="../requests/create_transfers#exists_with_different_amount"><code>exists_with_different_amount</code></a>
only when the maximum amount passed to <code>create_transfers</code> is
insufficient to fulfill the amount that was actually transferred.
Otherwise it may return <a
href="../requests/create_transfers#exists"><code>exists</code></a> even
if the retry amount differs from the original value.</p>
<p><code>flags.balancing_credit</code> is exclusive with the
<code>flags.post_pending_transfer</code>/<code>flags.void_pending_transfer</code>
flags because posting or voiding a pending transfer will never
exceed/overflow either account’s limits.</p>
<p><code>flags.balancing_credit</code> is compatible with (and
orthogonal to) <code>flags.balancing_debit</code>.</p>
<details>
<summary>Client release &lt; 0.16.0</summary>

<p>Transfer at most <a href="#amount"><code>amount</code></a> —
automatically transferring less than <code>amount</code> as necessary
such that
<code>credit_account.credits_pending + credit_account.credits_posted ≤ credit_account.debits_posted</code>.
If <code>amount</code> is set to <code>0</code>, transfer at most
<code>2^64 - 1</code> (i.e. as much as possible).</p>
<p>If the highest amount transferable is <code>0</code>, returns <a
href="../requests/create_transfers#exceeds_debits"><code>exceeds_debits</code></a>.</p>
</details>

<h5 id="examples-3"><a href="#examples-3"
class="anchor">Examples</a></h5>
<ul>
<li><a href="../../coding/recipes/close-account">Close Account</a></li>
</ul>
<h4 id="flagsclosing_debit"><a href="#flagsclosing_debit"
class="anchor"><code>flags.closing_debit</code></a></h4>
<p>When set, it will cause the <a
href="../account#flagsclosed"><code>Account.flags.closed</code></a> flag
of the <a href="#debit_account_id">debit account</a> to be set if the
transfer succeeds.</p>
<p>This flag requires a <a href="#modes">two-phase transfer</a>, so the
flag <a href="#flagspending"><code>flags.pending</code></a> must also be
set. This ensures that closing transfers are reversible by <a
href="#flagsvoid_pending_transfer">voiding</a> the pending transfer, and
requires that the reversal operation references the corresponding
closing transfer, guarding against unexpected interleaving of
close/unclose operations.</p>
<h4 id="flagsclosing_credit"><a href="#flagsclosing_credit"
class="anchor"><code>flags.closing_credit</code></a></h4>
<p>When set, it will cause the <a
href="../account#flagsclosed"><code>Account.flags.closed</code></a> flag
of the <a href="#credit_account_id">credit account</a> to be set if the
transfer succeeds.</p>
<p>This flag requires a <a href="#modes">two-phase transfer</a>, so the
flag <a href="#flagspending"><code>flags.pending</code></a> must also be
set. This ensures that closing transfers are reversible by <a
href="#flagsvoid_pending_transfer">voiding</a> the pending transfer, and
requires that the reversal operation references the corresponding
closing transfer, guarding against unexpected interleaving of
close/unclose operations.</p>
<h4 id="flagsimported"><a href="#flagsimported"
class="anchor"><code>flags.imported</code></a></h4>
<p>When set, allows importing historical <code>Transfer</code>s with
their original <a href="#timestamp"><code>timestamp</code></a>.</p>
<p>TigerBeetle will not use the <a href="../../coding/time">cluster
clock</a> to assign the timestamp, allowing the user to define it,
expressing <em>when</em> the transfer was effectively created by an
external event.</p>
<p>To maintain system invariants regarding auditability and
traceability, some constraints are necessary:</p>
<ul>
<li><p>It is not allowed to mix events with the <code>imported</code>
flag set and <em>not</em> set in the same batch. The application must
submit batches of imported events separately.</p></li>
<li><p>User-defined timestamps must be <strong>unique</strong> and
expressed as nanoseconds since the UNIX epoch. No two objects can have
the same timestamp, even different objects like an <code>Account</code>
and a <code>Transfer</code> cannot share the same timestamp.</p></li>
<li><p>User-defined timestamps must be a past date, never ahead of the
cluster clock at the time the request arrives.</p></li>
<li><p>Timestamps must be strictly increasing.</p>
<p>Even user-defined timestamps that are required to be past dates need
to be at least one nanosecond ahead of the timestamp of the last
transfer committed by the cluster.</p>
<p>Since the timestamp cannot regress, importing past events can be
naturally restrictive without coordination, as the last timestamp can be
updated using the cluster clock during regular cluster activity.
Instead, it’s recommended to import events only on a fresh cluster or
during a scheduled maintenance window.</p>
<p>It’s recommended to submit the entire batch as a <a
href="#flagslinked">linked chain</a>, ensuring that if any transfer
fails, none of them are committed, preserving the last timestamp
unchanged. This approach gives the application a chance to correct
failed imported transfers, re-submitting the batch again with the same
user-defined timestamps.</p></li>
<li><p>Imported transfers cannot have a <a
href="#timeout"><code>timeout</code></a>.</p>
<p>It’s possible to import <a href="#flagspending">pending</a> transfers
with a user-defined timestamp, but since it’s not driven by the cluster
clock, it cannot define a <a href="#timeout"><code>timeout</code></a>
for automatic expiration. In those cases, the <a
href="../../coding/two-phase-transfers">two-phase post or rollback</a>
must be done manually.</p></li>
</ul>
<h3 id="timestamp"><a href="#timestamp"
class="anchor"><code>timestamp</code></a></h3>
<p>This is the time the transfer was created, as nanoseconds since UNIX
epoch. You can read more about <a href="../../coding/time">Time in
TigerBeetle</a>.</p>
<p>Constraints:</p>
<ul>
<li><p>Type is 64-bit unsigned integer (8 bytes)</p></li>
<li><p>Must be <code>0</code> when the <code>Transfer</code> is created
with <a href="#flagsimported"><code>flags.imported</code></a>
<em>not</em> set</p>
<p>It is set by TigerBeetle to the moment the transfer arrives at the
cluster.</p></li>
<li><p>Must be greater than <code>0</code> and less than
<code>2^63</code> when the <code>Transfer</code> is created with <a
href="#flagsimported"><code>flags.imported</code></a> set</p></li>
</ul>
<h2 id="internals"><a href="#internals"
class="anchor">Internals</a></h2>
<p>If you’re curious and want to learn more, you can find the source
code for this struct in <a
href="https://github.com/tigerbeetle/tigerbeetle/blob/main/src/tigerbeetle.zig">src/tigerbeetle.zig</a>.
Search for <code>const Transfer = extern struct {</code>.</p>
<p>You can find the source code for creating a transfer in <a
href="https://github.com/tigerbeetle/tigerbeetle/blob/main/src/state_machine.zig">src/state_machine.zig</a>.
Search for <code>fn create_transfer(</code>.</p>

          <a id="edit-link" href="https://github.com/tigerbeetle/tigerbeetle/edit/main/docs/reference/transfer.md">
            <svg width="16" height="16" fill="none">
              <path d="M10 4L12 6M8.667 13.333H14M3.333 10.667L2.667 13.333L5.333 12.667L13.0574 4.94263C13.3074 4.69259 13.4478 4.35351 13.4478 4C13.4478 3.64641 13.3074 3.30733 13.0574 3.05729L12.9427 2.94263C12.6927 2.69267 12.3536 2.55225 12 2.55225C11.6465 2.55225 11.3075 2.69267 11.0574 2.94263L3.333 10.667Z" stroke-width="1.333" stroke-linecap="round" stroke-linejoin="round" stroke="currentColor"/>
            </svg>
            Edit this page
          </a>
        </div>
      </article>
    </main>
    <div id="svg-templates" style="width: 0; height: 0; overflow: hidden;" aria-hidden="true">
      <svg id="svg-tigerbeetle-logo" width="127" height="24" viewBox="0 0 127 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="m20.637 6.4656h-20.637c0-3.5378 3.1347-6.4656 6.7918-6.4656h20.637c0 3.5378-3.1347 6.4656-6.7919 6.4656z" fill="currentColor"/>
        <path d="m8.0098 22.84 1.4016-9.5939c0.59548-4.076 4.0996-7.1037 8.2215-7.1037l-1.8889 12.465c-0.6421 2.9286-4.0162 4.867-7.7342 4.2322z" fill="currentColor"/>
        <path d="m32.351 7.7116 0.3579-2.1298h10.035l-0.358 2.1298h-3.7406l-1.6705 10.088h-2.5534l1.6705-10.088h-3.7406zm9.969 10.088 1.5273-9.1636h2.5414l-1.5272 9.1636h-2.5415zm3.0605-10.357c-0.3778 0-0.69-0.12528-0.9366-0.37585-0.2427-0.25455-0.3421-0.55682-0.2983-0.90682 0.0437-0.35796 0.2147-0.66023 0.513-0.90682 0.2983-0.25057 0.6364-0.37585 1.0142-0.37585 0.3779 0 0.6861 0.12528 0.9248 0.37585 0.2386 0.24659 0.338 0.54886 0.2983 0.90682-0.0398 0.35-0.2089 0.65227-0.5072 0.90682-0.2943 0.25057-0.6303 0.37585-1.0082 0.37585zm5.0725 13.984c-0.8272 0-1.5173-0.1134-2.0701-0.3401-0.5489-0.2227-0.9665-0.527-1.2529-0.9128-0.2824-0.3858-0.4375-0.8193-0.4653-1.3005l2.4102-0.3162c0.0437 0.1869 0.1273 0.3599 0.2506 0.519 0.1272 0.1591 0.3082 0.2864 0.5429 0.3818 0.2386 0.0955 0.5468 0.1432 0.9247 0.1432 0.5528 0 1.0341-0.1352 1.4437-0.4057 0.4097-0.2665 0.6622-0.7139 0.7577-1.3423l0.2744-1.6764h-0.1074c-0.1511 0.2545-0.3579 0.4951-0.6204 0.7218-0.2585 0.2267-0.5747 0.4117-0.9486 0.5549-0.3699 0.1431-0.7974 0.2147-1.2827 0.2147-0.692 0-1.2926-0.1591-1.8017-0.4772-0.5051-0.3222-0.871-0.8134-1.0977-1.4736-0.2227-0.6642-0.2506-1.5034-0.0835-2.5176 0.175-1.0381 0.4892-1.9051 0.9426-2.6012 0.4534-0.69599 0.9903-1.217 1.6108-1.563s1.2668-0.51904 1.9389-0.51904c0.5131 0 0.9267 0.0875 1.2409 0.2625 0.3182 0.17103 0.5628 0.3858 0.7338 0.64432 0.1711 0.25455 0.2924 0.50512 0.364 0.75175h0.1014l0.2505-1.5392h2.5236l-1.5392 9.2532c-0.1233 0.7835-0.4196 1.4358-0.8889 1.9568-0.4653 0.525-1.056 0.9187-1.7719 1.1812-0.7159 0.2665-1.5094 0.3998-2.3804 0.3998zm0.9546-5.6677c0.4057 0 0.7696-0.1014 1.0917-0.3042 0.3262-0.2068 0.5986-0.5012 0.8174-0.883 0.2187-0.3858 0.3718-0.8471 0.4593-1.3841 0.0875-0.5369 0.0855-1.0022-0.0059-1.396-0.0875-0.3977-0.2586-0.7059-0.5131-0.9247-0.2506-0.2187-0.5807-0.3281-0.9903-0.3281-0.4216 0-0.7915 0.1133-1.1097 0.34-0.3182 0.2228-0.5827 0.533-0.7935 0.9307-0.2068 0.3977-0.352 0.8571-0.4355 1.3781-0.0875 0.529-0.0915 0.9864-0.0119 1.3722 0.0835 0.3818 0.2486 0.6781 0.4952 0.8889 0.2466 0.2068 0.5787 0.3102 0.9963 0.3102zm10.273 2.2194c-0.9387 0-1.7162-0.1909-2.3327-0.5728-0.6165-0.3858-1.05-0.9306-1.3006-1.6346-0.2466-0.708-0.2883-1.5452-0.1253-2.5117 0.1591-0.9426 0.4793-1.7699 0.9606-2.4818 0.4852-0.7119 1.0937-1.2668 1.8255-1.6645 0.7318-0.39772 1.5472-0.59659 2.446-0.59659 0.6046 0 1.1515 0.09745 1.6407 0.29233 0.4932 0.19091 0.9028 0.48125 1.2289 0.87103 0.3262 0.38581 0.5489 0.86901 0.6682 1.4497 0.1233 0.5807 0.1213 1.2608-0.0059 2.0403l-0.1134 0.6981h-7.7318l0.2446-1.575h5.3454c0.0597-0.366 0.0358-0.6901-0.0715-0.9725-0.1074-0.2824-0.2864-0.5031-0.537-0.6622-0.2505-0.1631-0.5588-0.2446-0.9247-0.2446-0.3739 0-0.7239 0.0915-1.05 0.2744-0.3261 0.183-0.6006 0.4236-0.8233 0.7219-0.2187 0.2943-0.3599 0.6145-0.4236 0.9605l-0.2804 1.5631c-0.0795 0.4812-0.0636 0.8809 0.0478 1.1991 0.1153 0.3182 0.3142 0.5568 0.5966 0.7159 0.2823 0.1551 0.6403 0.2327 1.0738 0.2327 0.2824 0 0.5469-0.0398 0.7935-0.1193 0.2506-0.0796 0.4733-0.1969 0.6682-0.352 0.1949-0.1591 0.3539-0.356 0.4772-0.5906l2.3208 0.1551c-0.2148 0.5648-0.5409 1.0579-0.9784 1.4795-0.4375 0.4176-0.9645 0.7438-1.581 0.9784-0.6125 0.2307-1.2986 0.3461-2.0582 0.3461zm5.9047-0.179 1.5273-9.1636h2.4639l-0.2684 1.5988h0.0954c0.2625-0.56873 0.6145-0.99828 1.056-1.2886 0.4454-0.29432 0.9247-0.44148 1.4378-0.44148 0.1272 0 0.2605 0.00796 0.3997 0.02386 0.1432 0.01194 0.2704 0.03182 0.3818 0.05966l-0.3818 2.2611c-0.1114-0.0398-0.2705-0.0716-0.4773-0.0955-0.2028-0.0278-0.3957-0.0417-0.5787-0.0417-0.3699 0-0.7139 0.0815-1.0321 0.2446-0.3182 0.1591-0.5866 0.3818-0.8054 0.6682-0.2148 0.2863-0.356 0.6164-0.4236 0.9903l-0.8531 5.1844h-2.5415zm6.922 0 2.0284-12.218h4.892c0.8989 0 1.6267 0.13323 2.1835 0.39971 0.5608 0.26648 0.9526 0.63637 1.1753 1.1097 0.2228 0.46932 0.2824 1.0102 0.179 1.6227-0.0835 0.47727-0.2525 0.89488-0.5071 1.2528-0.2506 0.35795-0.5608 0.65225-0.9307 0.88295s-0.7716 0.3938-1.2051 0.4892l-0.0239 0.1193c0.4614 0.0199 0.877 0.1512 1.2469 0.3938 0.3699 0.2386 0.6463 0.5767 0.8293 1.0142 0.1829 0.4375 0.2247 0.9565 0.1253 1.5571-0.1074 0.6483-0.364 1.227-0.7696 1.7361-0.4057 0.5051-0.9466 0.9048-1.6228 1.1991-0.6721 0.2943-1.4656 0.4415-2.3804 0.4415h-5.2201zm2.9412-2.1119h2.1059c0.7159 0 1.2628-0.1392 1.6407-0.4177 0.3778-0.2784 0.6045-0.6463 0.6801-1.1037 0.0517-0.338 0.0179-0.6363-0.1015-0.8948-0.1153-0.2586-0.3122-0.4614-0.5906-0.6086-0.2744-0.1471-0.6224-0.2207-1.044-0.2207h-2.1597l-0.5309 3.2455zm0.8292-4.9935h1.9151c0.35 0 0.6741-0.0617 0.9724-0.185 0.3023-0.1272 0.5509-0.3062 0.7458-0.53688 0.1988-0.23466 0.3241-0.51108 0.3758-0.82927 0.0716-0.44545-0.0278-0.80142-0.2983-1.0679-0.2665-0.27046-0.6841-0.40569-1.2528-0.40569h-1.9568l-0.5012 3.0247zm11.441 7.2844c-0.9386 0-1.7161-0.1909-2.3326-0.5728-0.6165-0.3858-1.05-0.9306-1.3006-1.6346-0.2466-0.708-0.2883-1.5452-0.1253-2.5117 0.1591-0.9426 0.4793-1.7699 0.9605-2.4818 0.4853-0.7119 1.0938-1.2668 1.8256-1.6645 0.7318-0.39772 1.5472-0.59659 2.446-0.59659 0.6046 0 1.1514 0.09745 1.6406 0.29233 0.4932 0.19091 0.9029 0.48125 1.229 0.87103 0.3262 0.38581 0.5489 0.86901 0.6682 1.4497 0.1233 0.5807 0.1213 1.2608-6e-3 2.0403l-0.1133 0.6981h-7.7318l0.2446-1.575h5.3454c0.0597-0.366 0.0358-0.6901-0.0716-0.9725-0.1073-0.2824-0.2863-0.5031-0.5369-0.6622-0.2506-0.1631-0.5588-0.2446-0.9247-0.2446-0.3739 0-0.7239 0.0915-1.05 0.2744-0.3261 0.183-0.6006 0.4236-0.8233 0.7219-0.2188 0.2943-0.3599 0.6145-0.4236 0.9605l-0.2804 1.5631c-0.0795 0.4812-0.0636 0.8809 0.0477 1.1991 0.1154 0.3182 0.3142 0.5568 0.5966 0.7159 0.2824 0.1551 0.6404 0.2327 1.0739 0.2327 0.2824 0 0.5469-0.0398 0.7935-0.1193 0.2505-0.0796 0.4733-0.1969 0.6681-0.352 0.1949-0.1591 0.354-0.356 0.4773-0.5906l2.3208 0.1551c-0.2148 0.5648-0.541 1.0579-0.9785 1.4795-0.4375 0.4176-0.9644 0.7438-1.5809 0.9784-0.6125 0.2307-1.2986 0.3461-2.0583 0.3461zm10.057 0c-0.9387 0-1.7162-0.1909-2.3327-0.5728-0.6165-0.3858-1.05-0.9306-1.3006-1.6346-0.2466-0.708-0.2883-1.5452-0.1252-2.5117 0.159-0.9426 0.4792-1.7699 0.9605-2.4818 0.4852-0.7119 1.0937-1.2668 1.8255-1.6645 0.7319-0.39772 1.5472-0.59659 2.4462-0.59659 0.604 0 1.151 0.09745 1.64 0.29233 0.494 0.19091 0.903 0.48125 1.229 0.87103 0.327 0.38581 0.549 0.86901 0.669 1.4497 0.123 0.5807 0.121 1.2608-6e-3 2.0403l-0.114 0.6981h-7.7315l0.2446-1.575h5.3459c0.059-0.366 0.035-0.6901-0.072-0.9725s-0.286-0.5031-0.537-0.6622c-0.251-0.1631-0.559-0.2446-0.925-0.2446-0.374 0-0.724 0.0915-1.0497 0.2744-0.3261 0.183-0.6005 0.4236-0.8233 0.7219-0.2187 0.2943-0.3599 0.6145-0.4236 0.9605l-0.2804 1.5631c-0.0795 0.4812-0.0636 0.8809 0.0478 1.1991 0.1153 0.3182 0.3142 0.5568 0.5966 0.7159 0.2824 0.1551 0.6403 0.2327 1.0736 0.2327 0.283 0 0.547-0.0398 0.794-0.1193 0.25-0.0796 0.473-0.1969 0.668-0.352 0.195-0.1591 0.354-0.356 0.477-0.5906l2.321 0.1551c-0.215 0.5648-0.541 1.0579-0.979 1.4795-0.437 0.4176-0.964 0.7438-1.58 0.9784-0.613 0.2307-1.299 0.3461-2.0587 0.3461zm12.306-9.3426-0.316 1.909h-5.524l0.322-1.909h5.518zm-3.907-2.1954h2.541l-1.42 8.5432c-0.039 0.2346-0.033 0.4176 0.018 0.5488 0.052 0.1273 0.137 0.2168 0.257 0.2685 0.123 0.0517 0.27 0.0776 0.441 0.0776 0.12 0 0.241-0.01 0.364-0.0299 0.123-0.0238 0.217-0.0417 0.281-0.0537l0.095 1.8912c-0.143 0.0438-0.336 0.0915-0.579 0.1432-0.238 0.0517-0.521 0.0835-0.847 0.0955-0.62 0.0238-1.145-0.0577-1.575-0.2446-0.429-0.1909-0.738-0.4833-0.925-0.877-0.186-0.3938-0.226-0.8889-0.119-1.4855l1.468-8.8773zm8.802-0.85909-2.028 12.218h-2.541l2.028-12.218h2.541zm4.16 12.397c-0.938 0-1.716-0.1909-2.332-0.5728-0.617-0.3858-1.05-0.9306-1.301-1.6346-0.247-0.708-0.288-1.5452-0.125-2.5117 0.159-0.9426 0.479-1.7699 0.96-2.4818 0.485-0.7119 1.094-1.2668 1.826-1.6645 0.732-0.39772 1.547-0.59659 2.446-0.59659 0.604 0 1.151 0.09745 1.64 0.29233 0.494 0.19091 0.903 0.48125 1.229 0.87103 0.327 0.38581 0.549 0.86901 0.669 1.4497 0.123 0.5807 0.121 1.2608-6e-3 2.0403l-0.114 0.6981h-7.732l0.245-1.575h5.345c0.06-0.366 0.036-0.6901-0.071-0.9725s-0.286-0.5031-0.537-0.6622c-0.251-0.1631-0.559-0.2446-0.925-0.2446-0.374 0-0.724 0.0915-1.05 0.2744-0.326 0.183-0.6 0.4236-0.823 0.7219-0.219 0.2943-0.36 0.6145-0.424 0.9605l-0.28 1.5631c-0.08 0.4812-0.064 0.8809 0.048 1.1991 0.115 0.3182 0.314 0.5568 0.596 0.7159 0.283 0.1551 0.641 0.2327 1.074 0.2327 0.283 0 0.547-0.0398 0.794-0.1193 0.25-0.0796 0.473-0.1969 0.668-0.352 0.195-0.1591 0.354-0.356 0.477-0.5906l2.321 0.1551c-0.215 0.5648-0.541 1.0579-0.979 1.4795-0.437 0.4176-0.964 0.7438-1.581 0.9784-0.612 0.2307-1.298 0.3461-2.058 0.3461z" fill="currentColor"/>
      </svg>
    </div>
    <script>window.urlPrefix = "";

// Enable search if JavaScript is enabled.
document.querySelector(".search-box").style.removeProperty("display");

if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register(urlPrefix + "/service-worker.js");
}

const leftPane = document.querySelector(".left-pane");
const resizer = document.querySelector(".resizer");
resizer.addEventListener("mousedown", () => {
  resizer.classList.add("resizing");
  document.body.style.cursor = "col-resize";
  document.body.style.userSelect = document.body.style.webkitUserSelect = "none";
  document.addEventListener("mousemove", onMouseMove);
  document.addEventListener("mouseup", onMouseUp);
  function onMouseMove(e) {
    leftPane.style.width = Math.max(176, e.clientX) + "px";
    if (e.clientX < 130) {
      document.body.classList.add("sidenav-collapsed");
    } else if (e.clientX > 140) {
      document.body.classList.remove("sidenav-collapsed");
    }
  }
  function onMouseUp() {
    resizer.classList.remove("resizing");
    document.body.style.cursor = "";
    document.body.style.userSelect = document.body.style.webkitUserSelect = "";
    document.removeEventListener("mousemove", onMouseMove);
  }
});
resizer.addEventListener("dblclick", () => leftPane.style.removeProperty("width"));

const collapseButton = document.querySelector(".collapse-button");
collapseButton.addEventListener("click", () => document.body.classList.add("sidenav-collapsed"));
const expandButton = document.querySelector(".expand-button");
expandButton.addEventListener("click", () => document.body.classList.remove("sidenav-collapsed"));

const navSide = document.querySelector("nav.side");
const details = [...navSide.querySelectorAll("details")];

const menuButton = document.querySelector(".menu-button");
menuButton.addEventListener("click", () => {
  document.body.classList.toggle("mobile-expanded");
  if (leftPane.classList.contains("search-active")) closeSearch();
});

// Restore and save the state of the side navigation
const navSideState = JSON.parse(localStorage.getItem("navSideState"));
if (navSideState) {
  leftPane.style.width = navSideState.width;
  if (navSideState.collapsed) document.body.classList.add("sidenav-collapsed");
  navSideState.expanded.forEach((expanded, i) => {
    if (i < details.length) details[i].open = expanded
  });
  leftPane.scrollTop = navSideState.scrollTop;
}
window.addEventListener("beforeunload", () => {
  const navSideState = {
    width: leftPane.style.width,
    collapsed: document.body.classList.contains("sidenav-collapsed"),
    expanded: details.map(detail => detail.open),
    scrollTop: leftPane.scrollTop,
  };
  localStorage.setItem("navSideState", JSON.stringify(navSideState));
});

function syncSideNavWithLocation() {
  const target = document.querySelector("nav.side .target");
  if (target) target.classList.remove("target");

  const path = location.pathname;
  if (path.length > 1) {
    document.querySelectorAll("nav.side a").forEach(a => {
      if (a.href.endsWith(path)) {
        a.classList.add("target");
        for (let parent = a.parentElement; parent; parent = parent.parentElement) {
          if (parent.tagName === "DETAILS") {
            parent.open = true;
          }
        }
      }
    });
  }
}

syncSideNavWithLocation();
</script>
    <script src="/js/search.js"></script>
  </body>
</html>
