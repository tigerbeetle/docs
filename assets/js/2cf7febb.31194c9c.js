"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9743],{3905:(e,t,n)=>{n.d(t,{Zo:()=>f,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),o=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):d(d({},t),e)),n},f=function(e){var t=o(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",_={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,f=s(e,["components","mdxType","originalType","parentName"]),p=o(n),c=r,m=p["".concat(l,".").concat(c)]||p[c]||_[c]||i;return n?a.createElement(m,d(d({ref:t},f),{},{components:n})):a.createElement(m,d({ref:t},f))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,d=new Array(i);d[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,d[1]=s;for(var o=2;o<i;o++)d[o]=n[o];return a.createElement.apply(null,d)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},3196:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>d,default:()=>_,frontMatter:()=>i,metadata:()=>s,toc:()=>o});var a=n(7462),r=(n(7294),n(3905));const i={},d="create_transfers",s={unversionedId:"reference/requests/create_transfers",id:"reference/requests/create_transfers",title:"create_transfers",description:"Create one or more Transfers. A successfully created transfer will modify the",source:"@site/pages/reference/requests/create_transfers.md",sourceDirName:"reference/requests",slug:"/reference/requests/create_transfers",permalink:"/reference/requests/create_transfers",draft:!1,editUrl:"https://github.com/tigerbeetle/tigerbeetle/blob/main/docs/reference/requests/create_transfers.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"create_accounts",permalink:"/reference/requests/create_accounts"},next:{title:"get_account_balances",permalink:"/reference/requests/get_account_balances"}},l={},o=[{value:"Event",id:"event",level:2},{value:"Result",id:"result",level:2},{value:"<code>ok</code>",id:"ok",level:3},{value:"<code>linked_event_failed</code>",id:"linked_event_failed",level:3},{value:"<code>linked_event_chain_open</code>",id:"linked_event_chain_open",level:3},{value:"<code>imported_event_expected</code>",id:"imported_event_expected",level:3},{value:"<code>imported_event_not_expected</code>",id:"imported_event_not_expected",level:3},{value:"<code>timestamp_must_be_zero</code>",id:"timestamp_must_be_zero",level:3},{value:"<code>imported_event_timestamp_out_of_range</code>",id:"imported_event_timestamp_out_of_range",level:3},{value:"<code>imported_event_timestamp_must_not_advance</code>",id:"imported_event_timestamp_must_not_advance",level:3},{value:"<code>reserved_flag</code>",id:"reserved_flag",level:3},{value:"<code>id_must_not_be_zero</code>",id:"id_must_not_be_zero",level:3},{value:"<code>id_must_not_be_int_max</code>",id:"id_must_not_be_int_max",level:3},{value:"<code>exists_with_different_flags</code>",id:"exists_with_different_flags",level:3},{value:"<code>exists_with_different_pending_id</code>",id:"exists_with_different_pending_id",level:3},{value:"<code>exists_with_different_timeout</code>",id:"exists_with_different_timeout",level:3},{value:"<code>exists_with_different_debit_account_id</code>",id:"exists_with_different_debit_account_id",level:3},{value:"<code>exists_with_different_credit_account_id</code>",id:"exists_with_different_credit_account_id",level:3},{value:"<code>exists_with_different_amount</code>",id:"exists_with_different_amount",level:3},{value:"<code>exists_with_different_user_data_128</code>",id:"exists_with_different_user_data_128",level:3},{value:"<code>exists_with_different_user_data_64</code>",id:"exists_with_different_user_data_64",level:3},{value:"<code>exists_with_different_user_data_32</code>",id:"exists_with_different_user_data_32",level:3},{value:"<code>exists_with_different_ledger</code>",id:"exists_with_different_ledger",level:3},{value:"<code>exists_with_different_code</code>",id:"exists_with_different_code",level:3},{value:"<code>exists</code>",id:"exists",level:3},{value:"<code>id_already_failed</code>",id:"id_already_failed",level:3},{value:"<code>flags_are_mutually_exclusive</code>",id:"flags_are_mutually_exclusive",level:3},{value:"<code>debit_account_id_must_not_be_zero</code>",id:"debit_account_id_must_not_be_zero",level:3},{value:"<code>debit_account_id_must_not_be_int_max</code>",id:"debit_account_id_must_not_be_int_max",level:3},{value:"<code>credit_account_id_must_not_be_zero</code>",id:"credit_account_id_must_not_be_zero",level:3},{value:"<code>credit_account_id_must_not_be_int_max</code>",id:"credit_account_id_must_not_be_int_max",level:3},{value:"<code>accounts_must_be_different</code>",id:"accounts_must_be_different",level:3},{value:"<code>pending_id_must_be_zero</code>",id:"pending_id_must_be_zero",level:3},{value:"<code>pending_id_must_not_be_zero</code>",id:"pending_id_must_not_be_zero",level:3},{value:"<code>pending_id_must_not_be_int_max</code>",id:"pending_id_must_not_be_int_max",level:3},{value:"<code>pending_id_must_be_different</code>",id:"pending_id_must_be_different",level:3},{value:"<code>timeout_reserved_for_pending_transfer</code>",id:"timeout_reserved_for_pending_transfer",level:3},{value:"<code>closing_transfer_must_be_pending</code>",id:"closing_transfer_must_be_pending",level:3},{value:"<code>amount_must_not_be_zero</code>",id:"amount_must_not_be_zero",level:3},{value:"<code>ledger_must_not_be_zero</code>",id:"ledger_must_not_be_zero",level:3},{value:"<code>code_must_not_be_zero</code>",id:"code_must_not_be_zero",level:3},{value:"<code>debit_account_not_found</code>",id:"debit_account_not_found",level:3},{value:"<code>credit_account_not_found</code>",id:"credit_account_not_found",level:3},{value:"<code>accounts_must_have_the_same_ledger</code>",id:"accounts_must_have_the_same_ledger",level:3},{value:"<code>transfer_must_have_the_same_ledger_as_accounts</code>",id:"transfer_must_have_the_same_ledger_as_accounts",level:3},{value:"<code>pending_transfer_not_found</code>",id:"pending_transfer_not_found",level:3},{value:"<code>pending_transfer_not_pending</code>",id:"pending_transfer_not_pending",level:3},{value:"<code>pending_transfer_has_different_debit_account_id</code>",id:"pending_transfer_has_different_debit_account_id",level:3},{value:"<code>pending_transfer_has_different_credit_account_id</code>",id:"pending_transfer_has_different_credit_account_id",level:3},{value:"<code>pending_transfer_has_different_ledger</code>",id:"pending_transfer_has_different_ledger",level:3},{value:"<code>pending_transfer_has_different_code</code>",id:"pending_transfer_has_different_code",level:3},{value:"<code>exceeds_pending_transfer_amount</code>",id:"exceeds_pending_transfer_amount",level:3},{value:"<code>pending_transfer_has_different_amount</code>",id:"pending_transfer_has_different_amount",level:3},{value:"<code>pending_transfer_already_posted</code>",id:"pending_transfer_already_posted",level:3},{value:"<code>pending_transfer_already_voided</code>",id:"pending_transfer_already_voided",level:3},{value:"<code>pending_transfer_expired</code>",id:"pending_transfer_expired",level:3},{value:"<code>imported_event_timestamp_must_not_regress</code>",id:"imported_event_timestamp_must_not_regress",level:3},{value:"<code>imported_event_timestamp_must_postdate_debit_account</code>",id:"imported_event_timestamp_must_postdate_debit_account",level:3},{value:"<code>imported_event_timestamp_must_postdate_credit_account</code>",id:"imported_event_timestamp_must_postdate_credit_account",level:3},{value:"<code>imported_event_timeout_must_be_zero</code>",id:"imported_event_timeout_must_be_zero",level:3},{value:"<code>debit_account_already_closed</code>",id:"debit_account_already_closed",level:3},{value:"<code>credit_account_already_closed</code>",id:"credit_account_already_closed",level:3},{value:"<code>overflows_debits_pending</code>",id:"overflows_debits_pending",level:3},{value:"<code>overflows_credits_pending</code>",id:"overflows_credits_pending",level:3},{value:"<code>overflows_debits_posted</code>",id:"overflows_debits_posted",level:3},{value:"<code>overflows_credits_posted</code>",id:"overflows_credits_posted",level:3},{value:"<code>overflows_debits</code>",id:"overflows_debits",level:3},{value:"<code>overflows_credits</code>",id:"overflows_credits",level:3},{value:"<code>overflows_timeout</code>",id:"overflows_timeout",level:3},{value:"<code>exceeds_credits</code>",id:"exceeds_credits",level:3},{value:"<code>exceeds_debits</code>",id:"exceeds_debits",level:3},{value:"Client libraries",id:"client-libraries",level:2},{value:"Internals",id:"internals",level:2}],f={toc:o},p="wrapper";function _(e){let{components:t,...n}=e;return(0,r.kt)(p,(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"create_transfers"},(0,r.kt)("inlineCode",{parentName:"h1"},"create_transfers")),(0,r.kt)("p",null,"Create one or more ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer")),"s. A successfully created transfer will modify the\namount fields of its ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#debit_account_id"},"debit")," and\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#credit_account_id"},"credit")," accounts."),(0,r.kt)("h2",{id:"event"},"Event"),(0,r.kt)("p",null,"The transfer to create. See ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer"))," for constraints."),(0,r.kt)("h2",{id:"result"},"Result"),(0,r.kt)("p",null,"Results are listed in this section in order of descending precedence \u2014 that is, if more than one\nerror is applicable to the transfer being created, only the result listed first is returned."),(0,r.kt)("h3",{id:"ok"},(0,r.kt)("inlineCode",{parentName:"h3"},"ok")),(0,r.kt)("p",null,"The transfer was successfully created; did not previously exist."),(0,r.kt)("p",null,"Note that ",(0,r.kt)("inlineCode",{parentName:"p"},"ok")," is generated by the client implementation; the network protocol does not include a\nresult when the transfer was successfully created."),(0,r.kt)("h3",{id:"linked_event_failed"},(0,r.kt)("inlineCode",{parentName:"h3"},"linked_event_failed")),(0,r.kt)("p",null,"The transfer was not created. One or more of the other transfers in the\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagslinked"},"linked chain")," is invalid, so the whole chain failed."),(0,r.kt)("h3",{id:"linked_event_chain_open"},(0,r.kt)("inlineCode",{parentName:"h3"},"linked_event_chain_open")),(0,r.kt)("p",null,"The transfer was not created. The ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagslinked"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.linked"))," flag was set\non the last event in the batch, which is not legal. (",(0,r.kt)("inlineCode",{parentName:"p"},"flags.linked")," indicates that the chain\ncontinues to the next operation)."),(0,r.kt)("h3",{id:"imported_event_expected"},(0,r.kt)("inlineCode",{parentName:"h3"},"imported_event_expected")),(0,r.kt)("p",null,"The transfer was not created. The ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.imported"))," was\nset on the first transfer of the batch, but not all transfers in the batch.\nBatches cannot mix imported transfers with non-imported transfers."),(0,r.kt)("h3",{id:"imported_event_not_expected"},(0,r.kt)("inlineCode",{parentName:"h3"},"imported_event_not_expected")),(0,r.kt)("p",null,"The transfer was not created. The ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.imported"))," was\nexpected to ",(0,r.kt)("em",{parentName:"p"},"not")," be set, as it's not allowed to mix transfers with different ",(0,r.kt)("inlineCode",{parentName:"p"},"imported")," flag\nin the same batch. The first transfer determines the entire operation."),(0,r.kt)("h3",{id:"timestamp_must_be_zero"},(0,r.kt)("inlineCode",{parentName:"h3"},"timestamp_must_be_zero")),(0,r.kt)("p",null,"This result only applies when ",(0,r.kt)("a",{parentName:"p",href:"/reference/account#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"Account.flags.imported"))," is ",(0,r.kt)("em",{parentName:"p"},"not")," set."),(0,r.kt)("p",null,"The transfer was not created. The ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#timestamp"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.timestamp"))," is nonzero, but\nmust be zero. The cluster is responsible for setting this field."),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#timestamp"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.timestamp"))," can only be assigned when creating transfers\nwith ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.imported"))," set."),(0,r.kt)("h3",{id:"imported_event_timestamp_out_of_range"},(0,r.kt)("inlineCode",{parentName:"h3"},"imported_event_timestamp_out_of_range")),(0,r.kt)("p",null,"This result only applies when ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.imported"))," is set."),(0,r.kt)("p",null,"The transfer was not created. The ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#timestamp"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.timestamp"))," is out of range,\nbut must be a user-defined timestamp greater than ",(0,r.kt)("inlineCode",{parentName:"p"},"0")," and less than ",(0,r.kt)("inlineCode",{parentName:"p"},"2^63"),"."),(0,r.kt)("h3",{id:"imported_event_timestamp_must_not_advance"},(0,r.kt)("inlineCode",{parentName:"h3"},"imported_event_timestamp_must_not_advance")),(0,r.kt)("p",null,"This result only applies when ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.imported"))," is set."),(0,r.kt)("p",null,"The transfer was not created. The user-defined ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#timestamp"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.timestamp"))," is\ngreater than the current ",(0,r.kt)("a",{parentName:"p",href:"/coding/time"},"cluster time"),", but it must be a past timestamp."),(0,r.kt)("h3",{id:"reserved_flag"},(0,r.kt)("inlineCode",{parentName:"h3"},"reserved_flag")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("inlineCode",{parentName:"p"},"Transfer.flags.reserved")," is nonzero, but must be zero."),(0,r.kt)("h3",{id:"id_must_not_be_zero"},(0,r.kt)("inlineCode",{parentName:"h3"},"id_must_not_be_zero")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.id"))," is zero, which is a reserved value."),(0,r.kt)("h3",{id:"id_must_not_be_int_max"},(0,r.kt)("inlineCode",{parentName:"h3"},"id_must_not_be_int_max")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.id"))," is ",(0,r.kt)("inlineCode",{parentName:"p"},"2^128 - 1"),", which is a reserved\nvalue."),(0,r.kt)("h3",{id:"exists_with_different_flags"},(0,r.kt)("inlineCode",{parentName:"h3"},"exists_with_different_flags")),(0,r.kt)("p",null,"A transfer with the same ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," already exists, but with different ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flags"},(0,r.kt)("inlineCode",{parentName:"a"},"flags")),"."),(0,r.kt)("h3",{id:"exists_with_different_pending_id"},(0,r.kt)("inlineCode",{parentName:"h3"},"exists_with_different_pending_id")),(0,r.kt)("p",null,"A transfer with the same ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," already exists, but with a different\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#pending_id"},(0,r.kt)("inlineCode",{parentName:"a"},"pending_id")),"."),(0,r.kt)("h3",{id:"exists_with_different_timeout"},(0,r.kt)("inlineCode",{parentName:"h3"},"exists_with_different_timeout")),(0,r.kt)("p",null,"A transfer with the same ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," already exists, but with a different\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#timeout"},(0,r.kt)("inlineCode",{parentName:"a"},"timeout")),"."),(0,r.kt)("h3",{id:"exists_with_different_debit_account_id"},(0,r.kt)("inlineCode",{parentName:"h3"},"exists_with_different_debit_account_id")),(0,r.kt)("p",null,"A transfer with the same ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," already exists, but with a different\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#debit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"debit_account_id")),"."),(0,r.kt)("h3",{id:"exists_with_different_credit_account_id"},(0,r.kt)("inlineCode",{parentName:"h3"},"exists_with_different_credit_account_id")),(0,r.kt)("p",null,"A transfer with the same ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," already exists, but with a different\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#credit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"credit_account_id")),"."),(0,r.kt)("h3",{id:"exists_with_different_amount"},(0,r.kt)("inlineCode",{parentName:"h3"},"exists_with_different_amount")),(0,r.kt)("p",null,"A transfer with the same ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," already exists, but with a different\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#amount"},(0,r.kt)("inlineCode",{parentName:"a"},"amount")),"."),(0,r.kt)("p",null,"If the transfer has ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsbalancing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_debit"))," or\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsbalancing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_credit"))," set, then the actual amount\ntransferred exceeds this failed transfer's ",(0,r.kt)("inlineCode",{parentName:"p"},"amount"),"."),(0,r.kt)("h3",{id:"exists_with_different_user_data_128"},(0,r.kt)("inlineCode",{parentName:"h3"},"exists_with_different_user_data_128")),(0,r.kt)("p",null,"A transfer with the same ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," already exists, but with a different\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#user_data_128"},(0,r.kt)("inlineCode",{parentName:"a"},"user_data_128")),"."),(0,r.kt)("h3",{id:"exists_with_different_user_data_64"},(0,r.kt)("inlineCode",{parentName:"h3"},"exists_with_different_user_data_64")),(0,r.kt)("p",null,"A transfer with the same ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," already exists, but with a different\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#user_data_64"},(0,r.kt)("inlineCode",{parentName:"a"},"user_data_64")),"."),(0,r.kt)("h3",{id:"exists_with_different_user_data_32"},(0,r.kt)("inlineCode",{parentName:"h3"},"exists_with_different_user_data_32")),(0,r.kt)("p",null,"A transfer with the same ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," already exists, but with a different\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#user_data_32"},(0,r.kt)("inlineCode",{parentName:"a"},"user_data_32")),"."),(0,r.kt)("h3",{id:"exists_with_different_ledger"},(0,r.kt)("inlineCode",{parentName:"h3"},"exists_with_different_ledger")),(0,r.kt)("p",null,"A transfer with the same ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," already exists, but with a different ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#ledger"},(0,r.kt)("inlineCode",{parentName:"a"},"ledger")),"."),(0,r.kt)("h3",{id:"exists_with_different_code"},(0,r.kt)("inlineCode",{parentName:"h3"},"exists_with_different_code")),(0,r.kt)("p",null,"A transfer with the same ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," already exists, but with a different ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#code"},(0,r.kt)("inlineCode",{parentName:"a"},"code")),"."),(0,r.kt)("h3",{id:"exists"},(0,r.kt)("inlineCode",{parentName:"h3"},"exists")),(0,r.kt)("p",null,"A transfer with the same ",(0,r.kt)("inlineCode",{parentName:"p"},"id")," already exists."),(0,r.kt)("p",null,"If the transfer has ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsbalancing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_debit"))," or\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsbalancing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_credit"))," set, then the existing\ntransfer may have a different ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#amount"},(0,r.kt)("inlineCode",{parentName:"a"},"amount")),", limited to the maximum\n",(0,r.kt)("inlineCode",{parentName:"p"},"amount")," of the transfer in the request."),(0,r.kt)("p",null,"If the transfer has ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagspost_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.post_pending_transfer")),"\nset, then the existing transfer may have a different ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#amount"},(0,r.kt)("inlineCode",{parentName:"a"},"amount")),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"If the original posted amount was less than the pending amount,\nthen the transfer amount must be equal to the posted amount."),(0,r.kt)("li",{parentName:"ul"},"Otherwise, the transfer amount must be greater than or equal to the pending amount.")),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Client release < 0.16.0"),(0,r.kt)("p",null,"If the transfer has ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsbalancing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_debit"))," or\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsbalancing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_credit"))," set, then the existing\ntransfer may have a different ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#amount"},(0,r.kt)("inlineCode",{parentName:"a"},"amount")),", limited to the maximum\n",(0,r.kt)("inlineCode",{parentName:"p"},"amount")," of the transfer in the request.")),(0,r.kt)("p",null,"Otherwise, with the possible exception of the ",(0,r.kt)("inlineCode",{parentName:"p"},"timestamp")," field, the existing transfer is identical\nto the transfer in the request."),(0,r.kt)("p",null,"To correctly ",(0,r.kt)("a",{parentName:"p",href:"/coding/reliable-transaction-submission"},"recover from application crashes"),",\nmany applications should handle ",(0,r.kt)("inlineCode",{parentName:"p"},"exists")," exactly as ",(0,r.kt)("a",{parentName:"p",href:"#ok"},(0,r.kt)("inlineCode",{parentName:"a"},"ok")),"."),(0,r.kt)("h3",{id:"id_already_failed"},(0,r.kt)("inlineCode",{parentName:"h3"},"id_already_failed")),(0,r.kt)("p",null,"The transfer was not created. A previous transfer with the same ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#id"},(0,r.kt)("inlineCode",{parentName:"a"},"id"))," failed\ndue to one of the following ",(0,r.kt)("em",{parentName:"p"},"transient errors"),":"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#debit_account_not_found"},(0,r.kt)("inlineCode",{parentName:"a"},"debit_account_not_found"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#credit_account_not_found"},(0,r.kt)("inlineCode",{parentName:"a"},"credit_account_not_found"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#pending_transfer_not_found"},(0,r.kt)("inlineCode",{parentName:"a"},"pending_transfer_not_found"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#exceeds_credits"},(0,r.kt)("inlineCode",{parentName:"a"},"exceeds_credits"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#exceeds_debits"},(0,r.kt)("inlineCode",{parentName:"a"},"exceeds_debits"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#debit_account_already_closed"},(0,r.kt)("inlineCode",{parentName:"a"},"debit_account_already_closed"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"#credit_account_already_closed"},(0,r.kt)("inlineCode",{parentName:"a"},"credit_account_already_closed")))),(0,r.kt)("p",null,"Transient errors depend on the database state at a given point in time, and each attempt\nis uniquely associated with the corresponding ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.id")),".\nThis behavior guarantees that retrying a transfer will not produce a different outcome\n(either success or failure)."),(0,r.kt)("p",null,"Without this mechanism, a transfer that previously failed could succeed if retried when the\nunderlying state changes (e.g., the target account has sufficient credits)."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Note:")," The application should retry an event only if it was unable to acknowledge the last\nresponse (e.g., due to an application restart) or because it is correcting a previously rejected\nmalformed request (e.g., due to an application bug).\nIf the application intends to submit the transfer again even after a transient error, it must\ngenerate a new ",(0,r.kt)("a",{parentName:"p",href:"/coding/data-modeling#id"},"idempotency id"),"."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Client release < 0.16.4"),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#id"},(0,r.kt)("inlineCode",{parentName:"a"},"id"))," is never checked against failed transfers, regardless of the error.\nTherefore, a transfer that failed due to a transient error could succeed if retried later.")),(0,r.kt)("h3",{id:"flags_are_mutually_exclusive"},(0,r.kt)("inlineCode",{parentName:"h3"},"flags_are_mutually_exclusive")),(0,r.kt)("p",null,"The transfer was not created. A transfer cannot be created with the specified combination of\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flags"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags")),"."),(0,r.kt)("p",null,"Flag compatibility (\u2713 = compatible, \u2717 = mutually exclusive):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspending"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.pending")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspost_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.post_pending_transfer"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsvoid_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.void_pending_transfer"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsbalancing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_debit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsbalancing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_credit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsclosing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.closing_debit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsclosing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.closing_credit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.imported"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspost_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.post_pending_transfer")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspending"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.pending"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsvoid_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.void_pending_transfer"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsbalancing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_debit"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsbalancing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_credit"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsclosing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.closing_debit"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsclosing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.closing_credit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.imported"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsvoid_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.void_pending_transfer")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspending"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.pending"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspost_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.post_pending_transfer"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsbalancing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_debit"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsbalancing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_credit"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsclosing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.closing_debit"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsclosing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.closing_credit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.imported"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsbalancing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_debit")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspending"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.pending"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsvoid_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.void_pending_transfer"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspost_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.post_pending_transfer"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsbalancing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_credit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsclosing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.closing_debit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsclosing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.closing_credit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.imported"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsbalancing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_credit")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspending"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.pending"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsvoid_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.void_pending_transfer"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspost_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.post_pending_transfer"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsbalancing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_debit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsclosing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.closing_debit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsclosing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.closing_credit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.imported"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsclosing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.closing_debit")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspending"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.pending"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspost_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.post_pending_transfer"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsvoid_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.void_pending_transfer"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsbalancing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_debit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsbalancing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_credit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsclosing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.closing_credit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.imported"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsclosing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.closing_credit")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspending"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.pending"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspost_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.post_pending_transfer"))),(0,r.kt)("li",{parentName:"ul"},"\u2717 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsvoid_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.void_pending_transfer"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsbalancing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_debit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsbalancing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_credit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsclosing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.closing_debit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.imported"))))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.imported")),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspending"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.pending"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspost_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.post_pending_transfer"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsvoid_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.void_pending_transfer"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsbalancing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_debit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsbalancing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_credit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsclosing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.closing_debit"))),(0,r.kt)("li",{parentName:"ul"},"\u2713 ",(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsclosing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.closing_credit")))))),(0,r.kt)("h3",{id:"debit_account_id_must_not_be_zero"},(0,r.kt)("inlineCode",{parentName:"h3"},"debit_account_id_must_not_be_zero")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#debit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.debit_account_id"))," is\nzero, but must be a valid account id."),(0,r.kt)("h3",{id:"debit_account_id_must_not_be_int_max"},(0,r.kt)("inlineCode",{parentName:"h3"},"debit_account_id_must_not_be_int_max")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#debit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.debit_account_id"))," is\n",(0,r.kt)("inlineCode",{parentName:"p"},"2^128 - 1"),", but must be a valid account id."),(0,r.kt)("h3",{id:"credit_account_id_must_not_be_zero"},(0,r.kt)("inlineCode",{parentName:"h3"},"credit_account_id_must_not_be_zero")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#credit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.credit_account_id"))," is\nzero, but must be a valid account id."),(0,r.kt)("h3",{id:"credit_account_id_must_not_be_int_max"},(0,r.kt)("inlineCode",{parentName:"h3"},"credit_account_id_must_not_be_int_max")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#credit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.credit_account_id"))," is\n",(0,r.kt)("inlineCode",{parentName:"p"},"2^128 - 1"),", but must be a valid account id."),(0,r.kt)("h3",{id:"accounts_must_be_different"},(0,r.kt)("inlineCode",{parentName:"h3"},"accounts_must_be_different")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#debit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.debit_account_id"))," and\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#credit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.credit_account_id"))," must not be equal."),(0,r.kt)("p",null,"That is, an account cannot transfer money to itself."),(0,r.kt)("h3",{id:"pending_id_must_be_zero"},(0,r.kt)("inlineCode",{parentName:"h3"},"pending_id_must_be_zero")),(0,r.kt)("p",null,"The transfer was not created. Only post/void transfers can reference a pending transfer."),(0,r.kt)("p",null,"Either:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagspost_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.post_pending_transfer"))," must be set,\nor"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#flagsvoid_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.void_pending_transfer"))," must be set,\nor"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/reference/transfer#pending_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.pending_id"))," must be zero.")),(0,r.kt)("h3",{id:"pending_id_must_not_be_zero"},(0,r.kt)("inlineCode",{parentName:"h3"},"pending_id_must_not_be_zero")),(0,r.kt)("p",null,"The transfer was not created.\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagspost_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.post_pending_transfer"))," or\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsvoid_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.void_pending_transfer"))," is set, but\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#pending_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.pending_id"))," is zero. A posting or voiding transfer must\nreference a ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagspending"},(0,r.kt)("inlineCode",{parentName:"a"},"pending"))," transfer."),(0,r.kt)("h3",{id:"pending_id_must_not_be_int_max"},(0,r.kt)("inlineCode",{parentName:"h3"},"pending_id_must_not_be_int_max")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#pending_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.pending_id"))," is ",(0,r.kt)("inlineCode",{parentName:"p"},"2^128 - 1"),",\nwhich is a reserved value."),(0,r.kt)("h3",{id:"pending_id_must_be_different"},(0,r.kt)("inlineCode",{parentName:"h3"},"pending_id_must_be_different")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#pending_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.pending_id"))," is set to the same\nid as ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.id")),". Instead it should refer to a different (existing)\ntransfer."),(0,r.kt)("h3",{id:"timeout_reserved_for_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"h3"},"timeout_reserved_for_pending_transfer")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#timeout"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.timeout"))," is nonzero, but only\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagspending"},"pending")," transfers have nonzero timeouts."),(0,r.kt)("h3",{id:"closing_transfer_must_be_pending"},(0,r.kt)("inlineCode",{parentName:"h3"},"closing_transfer_must_be_pending")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagspending"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.pending"))," is not set,\nbut closing transfers must be two-phase pending transfers."),(0,r.kt)("p",null,"If either ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsclosing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.closing_debit"))," or\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsclosing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.closing_credit"))," is set,\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagspending"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.pending"))," must also be set."),(0,r.kt)("p",null,"This ensures that closing transfers are reversible by\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsvoid_pending_transfer"},"voiding")," the pending transfer, and requires that the\nreversal operation references the corresponding closing transfer, guarding against unexpected\ninterleaving of close/unclose operations."),(0,r.kt)("h3",{id:"amount_must_not_be_zero"},(0,r.kt)("inlineCode",{parentName:"h3"},"amount_must_not_be_zero")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Deprecated"),": This error code is only returned to clients prior to release ",(0,r.kt)("inlineCode",{parentName:"p"},"0.16.0"),".\nSince ",(0,r.kt)("inlineCode",{parentName:"p"},"0.16.0"),", zero-amount transfers are permitted."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Client release < 0.16.0"),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#amount"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.amount"))," is zero, but must be\nnonzero."),(0,r.kt)("p",null,"Every transfer must move value. Only posting and voiding transfer amounts may be zero \u2014 when zero,\nthey will move the full pending amount.")),(0,r.kt)("h3",{id:"ledger_must_not_be_zero"},(0,r.kt)("inlineCode",{parentName:"h3"},"ledger_must_not_be_zero")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#ledger"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.ledger"))," is zero, but must be\nnonzero."),(0,r.kt)("h3",{id:"code_must_not_be_zero"},(0,r.kt)("inlineCode",{parentName:"h3"},"code_must_not_be_zero")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#code"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.code"))," is zero, but must be nonzero."),(0,r.kt)("h3",{id:"debit_account_not_found"},(0,r.kt)("inlineCode",{parentName:"h3"},"debit_account_not_found")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#debit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.debit_account_id"))," must\nrefer to an existing ",(0,r.kt)("inlineCode",{parentName:"p"},"Account"),"."),(0,r.kt)("p",null,"This is a ",(0,r.kt)("a",{parentName:"p",href:"#id_already_failed"},"transient error"),".\nThe ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.id"))," associated with this particular attempt will always fail\nupon retry, even if the underlying issue is resolved.\nTo succeed, a new ",(0,r.kt)("a",{parentName:"p",href:"/coding/data-modeling#id"},"idempotency id")," must be submitted."),(0,r.kt)("h3",{id:"credit_account_not_found"},(0,r.kt)("inlineCode",{parentName:"h3"},"credit_account_not_found")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#credit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.credit_account_id"))," must\nrefer to an existing ",(0,r.kt)("inlineCode",{parentName:"p"},"Account"),"."),(0,r.kt)("p",null,"This is a ",(0,r.kt)("a",{parentName:"p",href:"#id_already_failed"},"transient error"),".\nThe ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.id"))," associated with this particular attempt will always fail\nupon retry, even if the underlying issue is resolved.\nTo succeed, a new ",(0,r.kt)("a",{parentName:"p",href:"/coding/data-modeling#id"},"idempotency id")," must be submitted."),(0,r.kt)("h3",{id:"accounts_must_have_the_same_ledger"},(0,r.kt)("inlineCode",{parentName:"h3"},"accounts_must_have_the_same_ledger")),(0,r.kt)("p",null,"The transfer was not created. The accounts referred to by\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#debit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.debit_account_id"))," and\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#credit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.credit_account_id"))," must have an identical\n",(0,r.kt)("a",{parentName:"p",href:"/reference/account#ledger"},(0,r.kt)("inlineCode",{parentName:"a"},"ledger")),"."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/coding/recipes/currency-exchange"},"Currency exchange")," is implemented with multiple\ntransfers."),(0,r.kt)("h3",{id:"transfer_must_have_the_same_ledger_as_accounts"},(0,r.kt)("inlineCode",{parentName:"h3"},"transfer_must_have_the_same_ledger_as_accounts")),(0,r.kt)("p",null,"The transfer was not created. The accounts referred to by\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#debit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.debit_account_id"))," and\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#credit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.credit_account_id"))," are equivalent, but differ from the\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#ledger"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.ledger")),"."),(0,r.kt)("h3",{id:"pending_transfer_not_found"},(0,r.kt)("inlineCode",{parentName:"h3"},"pending_transfer_not_found")),(0,r.kt)("p",null,"The transfer was not created. The transfer referenced by\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#pending_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.pending_id"))," does not exist."),(0,r.kt)("p",null,"This is a ",(0,r.kt)("a",{parentName:"p",href:"#id_already_failed"},"transient error"),".\nThe ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.id"))," associated with this particular attempt will always fail\nupon retry, even if the underlying issue is resolved.\nTo succeed, a new ",(0,r.kt)("a",{parentName:"p",href:"/coding/data-modeling#id"},"idempotency id")," must be submitted."),(0,r.kt)("h3",{id:"pending_transfer_not_pending"},(0,r.kt)("inlineCode",{parentName:"h3"},"pending_transfer_not_pending")),(0,r.kt)("p",null,"The transfer was not created. The transfer referenced by\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#pending_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.pending_id"))," exists, but does not have\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagspending"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.pending"))," set."),(0,r.kt)("h3",{id:"pending_transfer_has_different_debit_account_id"},(0,r.kt)("inlineCode",{parentName:"h3"},"pending_transfer_has_different_debit_account_id")),(0,r.kt)("p",null,"The transfer was not created. The transfer referenced by\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#pending_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.pending_id"))," exists, but with a different\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#debit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"debit_account_id")),"."),(0,r.kt)("p",null,"The post/void transfer's ",(0,r.kt)("inlineCode",{parentName:"p"},"debit_account_id")," must either be ",(0,r.kt)("inlineCode",{parentName:"p"},"0")," or identical to the pending\ntransfer's ",(0,r.kt)("inlineCode",{parentName:"p"},"debit_account_id"),"."),(0,r.kt)("h3",{id:"pending_transfer_has_different_credit_account_id"},(0,r.kt)("inlineCode",{parentName:"h3"},"pending_transfer_has_different_credit_account_id")),(0,r.kt)("p",null,"The transfer was not created. The transfer referenced by\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#pending_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.pending_id"))," exists, but with a different\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#credit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"credit_account_id")),"."),(0,r.kt)("p",null,"The post/void transfer's ",(0,r.kt)("inlineCode",{parentName:"p"},"credit_account_id")," must either be ",(0,r.kt)("inlineCode",{parentName:"p"},"0")," or identical to the pending\ntransfer's ",(0,r.kt)("inlineCode",{parentName:"p"},"credit_account_id"),"."),(0,r.kt)("h3",{id:"pending_transfer_has_different_ledger"},(0,r.kt)("inlineCode",{parentName:"h3"},"pending_transfer_has_different_ledger")),(0,r.kt)("p",null,"The transfer was not created. The transfer referenced by\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#pending_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.pending_id"))," exists, but with a different\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#ledger"},(0,r.kt)("inlineCode",{parentName:"a"},"ledger")),"."),(0,r.kt)("p",null,"The post/void transfer's ",(0,r.kt)("inlineCode",{parentName:"p"},"ledger")," must either be ",(0,r.kt)("inlineCode",{parentName:"p"},"0")," or identical to the pending transfer's\n",(0,r.kt)("inlineCode",{parentName:"p"},"ledger"),"."),(0,r.kt)("h3",{id:"pending_transfer_has_different_code"},(0,r.kt)("inlineCode",{parentName:"h3"},"pending_transfer_has_different_code")),(0,r.kt)("p",null,"The transfer was not created. The transfer referenced by\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#pending_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.pending_id"))," exists, but with a different\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#code"},(0,r.kt)("inlineCode",{parentName:"a"},"code")),"."),(0,r.kt)("p",null,"The post/void transfer's ",(0,r.kt)("inlineCode",{parentName:"p"},"code")," must either be ",(0,r.kt)("inlineCode",{parentName:"p"},"0")," or identical to the pending transfer's ",(0,r.kt)("inlineCode",{parentName:"p"},"code"),"."),(0,r.kt)("h3",{id:"exceeds_pending_transfer_amount"},(0,r.kt)("inlineCode",{parentName:"h3"},"exceeds_pending_transfer_amount")),(0,r.kt)("p",null,"The transfer was not created. The transfer's ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#amount"},(0,r.kt)("inlineCode",{parentName:"a"},"amount"))," exceeds the ",(0,r.kt)("inlineCode",{parentName:"p"},"amount"),"\nof its ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#pending_id"},"pending")," transfer."),(0,r.kt)("h3",{id:"pending_transfer_has_different_amount"},(0,r.kt)("inlineCode",{parentName:"h3"},"pending_transfer_has_different_amount")),(0,r.kt)("p",null,"The transfer was not created. The transfer is attempting to\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsvoid_pending_transfer"},"void")," a pending transfer. The voiding transfer's\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#amount"},(0,r.kt)("inlineCode",{parentName:"a"},"amount"))," must be either ",(0,r.kt)("inlineCode",{parentName:"p"},"0")," or exactly the ",(0,r.kt)("inlineCode",{parentName:"p"},"amount")," of the pending\ntransfer."),(0,r.kt)("p",null,"To partially void a transfer, create a ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagspost_pending_transfer"},"posting transfer"),"\nwith an amount less than the pending transfer's ",(0,r.kt)("inlineCode",{parentName:"p"},"amount"),"."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Client release < 0.16.0"),(0,r.kt)("p",null,"To partially void a transfer, create a ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagspost_pending_transfer"},"posting transfer"),"\nwith an amount between ",(0,r.kt)("inlineCode",{parentName:"p"},"0")," and the pending transfer's ",(0,r.kt)("inlineCode",{parentName:"p"},"amount"),".")),(0,r.kt)("h3",{id:"pending_transfer_already_posted"},(0,r.kt)("inlineCode",{parentName:"h3"},"pending_transfer_already_posted")),(0,r.kt)("p",null,"The transfer was not created. The referenced ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#pending_id"},"pending")," transfer was\nalready posted by a ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagspost_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"post_pending_transfer")),"."),(0,r.kt)("h3",{id:"pending_transfer_already_voided"},(0,r.kt)("inlineCode",{parentName:"h3"},"pending_transfer_already_voided")),(0,r.kt)("p",null,"The transfer was not created. The referenced ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#pending_id"},"pending")," transfer was\nalready voided by a ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsvoid_pending_transfer"},(0,r.kt)("inlineCode",{parentName:"a"},"void_pending_transfer")),"."),(0,r.kt)("h3",{id:"pending_transfer_expired"},(0,r.kt)("inlineCode",{parentName:"h3"},"pending_transfer_expired")),(0,r.kt)("p",null,"The transfer was not created. The referenced ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#pending_id"},"pending")," transfer was\nalready voided because its ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#timeout"},"timeout")," has passed."),(0,r.kt)("h3",{id:"imported_event_timestamp_must_not_regress"},(0,r.kt)("inlineCode",{parentName:"h3"},"imported_event_timestamp_must_not_regress")),(0,r.kt)("p",null,"This result only applies when ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.imported"))," is set."),(0,r.kt)("p",null,"The transfer was not created. The user-defined ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#timestamp"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.timestamp")),"\nregressed, but it must be greater than the last timestamp assigned to any ",(0,r.kt)("inlineCode",{parentName:"p"},"Transfer")," in the cluster and cannot be equal to the timestamp of any existing ",(0,r.kt)("a",{parentName:"p",href:"/reference/account"},(0,r.kt)("inlineCode",{parentName:"a"},"Account")),"."),(0,r.kt)("h3",{id:"imported_event_timestamp_must_postdate_debit_account"},(0,r.kt)("inlineCode",{parentName:"h3"},"imported_event_timestamp_must_postdate_debit_account")),(0,r.kt)("p",null,"This result only applies when ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.imported"))," is set."),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#debit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.debit_account_id"))," must\nrefer to an ",(0,r.kt)("inlineCode",{parentName:"p"},"Account")," whose ",(0,r.kt)("a",{parentName:"p",href:"/reference/account#timestamp"},(0,r.kt)("inlineCode",{parentName:"a"},"timestamp"))," is less than the\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#timestamp"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.timestamp")),"."),(0,r.kt)("h3",{id:"imported_event_timestamp_must_postdate_credit_account"},(0,r.kt)("inlineCode",{parentName:"h3"},"imported_event_timestamp_must_postdate_credit_account")),(0,r.kt)("p",null,"This result only applies when ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.imported"))," is set."),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#credit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.credit_account_id"))," must\nrefer to an ",(0,r.kt)("inlineCode",{parentName:"p"},"Account")," whose ",(0,r.kt)("a",{parentName:"p",href:"/reference/account#timestamp"},(0,r.kt)("inlineCode",{parentName:"a"},"timestamp"))," is less than the\n",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#timestamp"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.timestamp")),"."),(0,r.kt)("h3",{id:"imported_event_timeout_must_be_zero"},(0,r.kt)("inlineCode",{parentName:"h3"},"imported_event_timeout_must_be_zero")),(0,r.kt)("p",null,"This result only applies when ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsimported"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.flags.imported"))," is set."),(0,r.kt)("p",null,"The transfer was not created. The ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#timeout"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.timeout"))," is nonzero, but\nmust be zero."),(0,r.kt)("p",null,"It's possible to import ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagspending"},"pending")," transfers with a user-defined\ntimestamp, but since it's not driven by the cluster clock, it cannot define a timeout for\nautomatic expiration.\nIn those cases, the ",(0,r.kt)("a",{parentName:"p",href:"/coding/two-phase-transfers"},"two-phase post or rollback")," must be\ndone manually."),(0,r.kt)("h3",{id:"debit_account_already_closed"},(0,r.kt)("inlineCode",{parentName:"h3"},"debit_account_already_closed")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#debit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.debit_account_id"))," must\nrefer to an ",(0,r.kt)("inlineCode",{parentName:"p"},"Account")," whose ",(0,r.kt)("a",{parentName:"p",href:"/reference/account#flagsclosed"},(0,r.kt)("inlineCode",{parentName:"a"},"Account.flags.closed"))," is not already set."),(0,r.kt)("p",null,"This is a ",(0,r.kt)("a",{parentName:"p",href:"#id_already_failed"},"transient error"),".\nThe ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.id"))," associated with this particular attempt will always fail\nupon retry, even if the underlying issue is resolved.\nTo succeed, a new ",(0,r.kt)("a",{parentName:"p",href:"/coding/data-modeling#id"},"idempotency id")," must be submitted."),(0,r.kt)("h3",{id:"credit_account_already_closed"},(0,r.kt)("inlineCode",{parentName:"h3"},"credit_account_already_closed")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#credit_account_id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.credit_account_id"))," must\nrefer to an ",(0,r.kt)("inlineCode",{parentName:"p"},"Account")," whose ",(0,r.kt)("a",{parentName:"p",href:"/reference/account#flagsclosed"},(0,r.kt)("inlineCode",{parentName:"a"},"Account.flags.closed"))," is not already set."),(0,r.kt)("p",null,"This is a ",(0,r.kt)("a",{parentName:"p",href:"#id_already_failed"},"transient error"),".\nThe ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.id"))," associated with this particular attempt will always fail\nupon retry, even if the underlying issue is resolved.\nTo succeed, a new ",(0,r.kt)("a",{parentName:"p",href:"/coding/data-modeling#id"},"idempotency id")," must be submitted."),(0,r.kt)("h3",{id:"overflows_debits_pending"},(0,r.kt)("inlineCode",{parentName:"h3"},"overflows_debits_pending")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("inlineCode",{parentName:"p"},"debit_account.debits_pending + transfer.amount")," would overflow a\n128-bit unsigned integer."),(0,r.kt)("h3",{id:"overflows_credits_pending"},(0,r.kt)("inlineCode",{parentName:"h3"},"overflows_credits_pending")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("inlineCode",{parentName:"p"},"credit_account.credits_pending + transfer.amount")," would overflow a\n128-bit unsigned integer."),(0,r.kt)("h3",{id:"overflows_debits_posted"},(0,r.kt)("inlineCode",{parentName:"h3"},"overflows_debits_posted")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("inlineCode",{parentName:"p"},"debit_account.debits_posted + transfer.amount")," would overflow a\n128-bit unsigned integer."),(0,r.kt)("h3",{id:"overflows_credits_posted"},(0,r.kt)("inlineCode",{parentName:"h3"},"overflows_credits_posted")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("inlineCode",{parentName:"p"},"debit_account.credits_posted + transfer.amount")," would overflow a\n128-bit unsigned integer."),(0,r.kt)("h3",{id:"overflows_debits"},(0,r.kt)("inlineCode",{parentName:"h3"},"overflows_debits")),(0,r.kt)("p",null,"The transfer was not created.\n",(0,r.kt)("inlineCode",{parentName:"p"},"debit_account.debits_pending + debit_account.debits_posted + transfer.amount")," would overflow a\n128-bit unsigned integer."),(0,r.kt)("h3",{id:"overflows_credits"},(0,r.kt)("inlineCode",{parentName:"h3"},"overflows_credits")),(0,r.kt)("p",null,"The transfer was not created.\n",(0,r.kt)("inlineCode",{parentName:"p"},"credit_account.credits_pending + credit_account.credits_posted + transfer.amount")," would overflow a\n128-bit unsigned integer."),(0,r.kt)("h3",{id:"overflows_timeout"},(0,r.kt)("inlineCode",{parentName:"h3"},"overflows_timeout")),(0,r.kt)("p",null,"The transfer was not created. ",(0,r.kt)("inlineCode",{parentName:"p"},"transfer.timestamp + (transfer.timeout * 1_000_000_000)")," would\nexceed ",(0,r.kt)("inlineCode",{parentName:"p"},"2^63"),"."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#timeout"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.timeout"))," is converted to nanoseconds."),(0,r.kt)("p",null,"This computation uses the ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#timestamp"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.timestamp"))," value assigned by the\nreplica, not the ",(0,r.kt)("inlineCode",{parentName:"p"},"0")," value sent by the client."),(0,r.kt)("h3",{id:"exceeds_credits"},(0,r.kt)("inlineCode",{parentName:"h3"},"exceeds_credits")),(0,r.kt)("p",null,"The transfer was not created."),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#debit_account_id"},"debit account")," has\n",(0,r.kt)("a",{parentName:"p",href:"/reference/account#flagsdebits_must_not_exceed_credits"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.debits_must_not_exceed_credits"))," set, but\n",(0,r.kt)("inlineCode",{parentName:"p"},"debit_account.debits_pending + debit_account.debits_posted + transfer.amount")," would exceed\n",(0,r.kt)("inlineCode",{parentName:"p"},"debit_account.credits_posted"),"."),(0,r.kt)("p",null,"This is a ",(0,r.kt)("a",{parentName:"p",href:"#id_already_failed"},"transient error"),".\nThe ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.id"))," associated with this particular attempt will always fail\nupon retry, even if the underlying issue is resolved.\nTo succeed, a new ",(0,r.kt)("a",{parentName:"p",href:"/coding/data-modeling#id"},"idempotency id")," must be submitted."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Client release < 0.16.0"),(0,r.kt)("p",null,"If ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsbalancing_debit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_debit"))," is set, then\n",(0,r.kt)("inlineCode",{parentName:"p"},"debit_account.debits_pending + debit_account.debits_posted + 1")," would exceed\n",(0,r.kt)("inlineCode",{parentName:"p"},"debit_account.credits_posted"),".")),(0,r.kt)("h3",{id:"exceeds_debits"},(0,r.kt)("inlineCode",{parentName:"h3"},"exceeds_debits")),(0,r.kt)("p",null,"The transfer was not created."),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#credit_account_id"},"credit account")," has\n",(0,r.kt)("a",{parentName:"p",href:"/reference/account#flagscredits_must_not_exceed_debits"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.credits_must_not_exceed_debits"))," set, but\n",(0,r.kt)("inlineCode",{parentName:"p"},"credit_account.credits_pending + credit_account.credits_posted + transfer.amount")," would exceed\n",(0,r.kt)("inlineCode",{parentName:"p"},"credit_account.debits_posted"),"."),(0,r.kt)("p",null,"This is a ",(0,r.kt)("a",{parentName:"p",href:"#id_already_failed"},"transient error"),".\nThe ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#id"},(0,r.kt)("inlineCode",{parentName:"a"},"Transfer.id"))," associated with this particular attempt will always fail\nupon retry, even if the underlying issue is resolved.\nTo succeed, a new ",(0,r.kt)("a",{parentName:"p",href:"/coding/data-modeling#id"},"idempotency id")," must be submitted."),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Client release < 0.16.0"),(0,r.kt)("p",null,"If ",(0,r.kt)("a",{parentName:"p",href:"/reference/transfer#flagsbalancing_credit"},(0,r.kt)("inlineCode",{parentName:"a"},"flags.balancing_credit"))," is set, then\n",(0,r.kt)("inlineCode",{parentName:"p"},"credit_account.credits_pending + credit_account.credits_posted + 1")," would exceed\n",(0,r.kt)("inlineCode",{parentName:"p"},"credit_account.debits_posted"),".")),(0,r.kt)("h2",{id:"client-libraries"},"Client libraries"),(0,r.kt)("p",null,"For language-specific docs see:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/clients/dotnet#create-transfers"},".NET library")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/clients/java#create-transfers"},"Java library")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/clients/go#create-transfers"},"Go library")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/clients/node#create-transfers"},"Node.js library")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/clients/python#create-transfers"},"Python library"))),(0,r.kt)("h2",{id:"internals"},"Internals"),(0,r.kt)("p",null,"If you're curious and want to learn more, you can find the source code for creating a transfer in\n",(0,r.kt)("a",{parentName:"p",href:"https://github.com/tigerbeetle/tigerbeetle/blob/main/src/state_machine.zig"},"src/state_machine.zig"),".\nSearch for ",(0,r.kt)("inlineCode",{parentName:"p"},"fn create_transfer(")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"fn execute("),"."))}_.isMDXComponent=!0}}]);